{"version":3,"sources":["game/selectors.js","hooks/counter.js","components/GameClock.js","components/InfoCard.js","game/dish/Dish.js","game/business.js","hooks/timer.js","game/customer/Customer.js","game/customer/business.js","game/dish/business.js","utils.js","game/cook/business.js","game/order/business.js","store/utils.js","game/actions.js","game/customer/CustomerTitle.js","components/EmptyTimer.js","game/customer/Customers.js","game/order/Order.js","game/order/OrderTitle.js","game/order/Orders.js","game/cook/Skill.js","game/cook/SkillPicker.js","game/cook/TakenSkill.js","game/cook/Cook.js","game/cook/CooksTitle.js","game/cook/Cooks.js","game/Game.js","history.js","game/GameStart.js","game/GameInfo.js","components/H1.js","levelEditor/business.js","levelEditor/ImportExportLevel.js","levelEditor/CustomerEditor.js","levelEditor/LevelEditor.js","App.js","serviceWorker.js","game/reducer.js","store/reducer.js","middleware/actionTimestampMiddleware.js","store/store.js","index.js"],"names":["baseSelector","callback","state","game","createSelector","getState","useSelector","isRunning","running","isPaused","paused","getLevels","levels","getCustomers","customers","getCustomerIds","phase","customerPhase","getCustomerPhase","Object","entries","map","_ref","_ref2","slicedToArray","id","data","sort","a","b","time","filter","_ref3","_ref4","length","aPhases","bPhases","_ref5","_ref6","getOrders","orders","getCooks","cooks","getTakenOrderIds","takenOrderIds","getOrderIdToResult","orderIdToResult","getActions","type","actions","action","useCounter","delay","increment","max","arguments","undefined","Number","MAX_SAFE_INTEGER","_useState","useState","_useState2","count","setCount","useEffect","intervalId","setInterval","nextCount","clearInterval","GameClock","minutes","seconds","concat","react_default","createElement","data-testid","containerStyle","css","label","display","alignItems","bodyStyle","flexDirection","overflow","nameStyle","marginLeft","InfoCard","props","src","name","className","containerClassName","es_avatar","Dish","dish","avatar","leaveAt","order","timeIncrease","baseTime","maxTime","additionalTime","WAITING_TIME_TYPE","ORDER","defaultProps","toString","WAITING","useTimer","onFinish","resetOnFinish","ref","useRef","_useCounter","current","progressContainerStyle","justifyContent","takeOrderProgressContainerStyle","makeOrderProgressContainerStyle","Customer","customer","takeOrder","onTimeExceeded","canMake","orderId","takeOrderEnabled","some","isOrderTaken","maxWaitTime","waitingTime","maxMakeTime","orderTime","row","justify","col","span","es_button","onClick","disabled","progress","default","percent","width","status","strokeColor","0%","100%","format","CUSTOMER_PHASE","ARRIVING","ACTIVE","DONE","ANGRY","PREPARATION_PHASE","GATHER_INGREDIENTS","MIX","BAKE","SERVE","PREPARATION_PHASE_TIME","Proxy","business_ref","defineProperty","get","target","p","receiver","DISH","SALAD","phases","PIZZA","createDish","index","_","random","keys","dishPrototype","cloneDeep","forEach","calculateMaxTime","capitaliseFirst","str","substr","toUpperCase","encode64","obj","String","btoa","JSON","stringify","decode64","asObject","decoded","atob","parse","createCook","faker","firstName","image","speed","level","experience","nextLevel","skills","skillsToTake","saveToLocalStorage","cooksCopy","values","cook","nextSkills","skill","cooks64","localStorage","setItem","console","log","SKILL_BAKER","SKILL_PLEASER","SKILL_MIXER","SKILL_COOK","SKILL_GATHERER","SKILL","_SKILL","description","takenDescription","icon","getSkill","Error","PHASE_PRESENT_PARTICIPLE_MAP","_PHASE_PRESENT_PARTIC","getPresentParticiple","PHASE_VERB_MAP","_PHASE_VERB_MAP","getOrderPhaseTime","speedPercent","basePhaseTime","decrease","baker","gatherer","mixer","cookSkill","getTimeDecreaseFromSkill","makeActionCreator","_len","argNames","Array","_key","_len2","args","_key2","makePayloadActionCreator","payload","gameStarted","gamePaused","levelsLoaded","gameStopped","customerAdded","CUSTOMER_PHASE_CHANGED","customerPhaseChanged","cookAdded","cooksReset","orderAdded","orderAttachedToCustomer","ORDER_TAKEN","orderTaken","orderDone","orderNextPhaseStarted","orderPhaseFinished","cookGainedExperience","cookLearnedSkill","actionRegistered","levelFinished","startGame","levelId","dispatch","stopGame","loadCooks","setTimeout","customerData","Math","floor","createCustomer","cookId","customerId","createOrder","startLevel","getItem","realSkill","getFromLocalStorage","finishPhase","Date","now","customerActions","orderActions","arrivedAtTime","timestamp","orderTakenAtTime","orderTakenAt","timeUntilTaken","maxOrderTime","timeOfResultReductionWait","timeOfResultReductionOrder","orderReductionInterval","takingOrderPart","takenTimeOver","round","makingOrderPart","orderDoneTimeOver","doneActions","doneAt","finishOrder","percentage","toFixed","result","minHeight","sectionStyle","margin","arrivingCustomersStyle","doneCustomersStyle","color","angryCustomersStyle","CustomerTitle","arrivingCustomers","doneCustomers","angryCustomers","totalCustomers","role","aria-label","EmptyTimer","start","propTypes","PropTypes","number","isRequired","bool","func","Customers","activeCustomerIds","doneCustomerIds","arrivingCustomerIds","angryCustomerIds","useDispatch","activeCustomers","transitions","useTransition","from","opacity","enter","leave","config","duration","card","title","style","exceedWaitingTime","key","item","web","div","titleContainer","cookButtonsStyle","flexWrap","orderInProgressContainerStyle","rowContainer","Order","isDone","dishStatus","nextDishStatus","currentCook","createButtonText","height","resultsContainer","percentStyle","OrderTitle","orderResults","averageResult","reduce","prev","Orders","takenOrders","Skill","rest","objectWithoutProperties","tooltip","placement","mouseLeaveDelay","assign","fontSize","marginRight","Panel","Collapse","SkillPicker","_ref$disabled","collapse","bordered","expandIcon","isActive","es_icon","theme","header","tag","TakenSkill","1","2","3","4","5","6","7","8","9","10","marginTop","cookCardContainerStyle","cookInfoStyle","Cook","experienceProgress","CooksTitle","Cooks","gamePanelsContainer","Game","flex","getPathname","window","location","pathname","redirect","path","history","pushState","GameStart","setLevel","textAlign","onChange","e","selectedIndex","value","GameInfo","borderBottom","H1","children","validateLevel","errors","isValid","customerAmount","customerError","saveLevelToLocalStorage","saveLevelsToLocalStorage","base64","ImportExportLevel","setId","setCustomers","useStore","levelInput","setLevelInput","Fragment","input","addonBefore","placeholder","loadLevel","nextLevels","objectSpread","document","body","appendChild","select","execCommand","removeChild","Option","Select","customerCardTitleStyle","errorStyle","customerContainer","CustomerEditor","onCustomerChange","removeCustomer","errorComponent","error","allowClear","es_select","showSearch","optionFilterProp","filterOption","option","indexOf","input_number","buttonContainerStyle","maxWidth","alignSelf","nameContainerStyle","addCustomerButtonStyle","customersContainerStyle","nextCustomerId","LevelEditor","_useState3","_useState4","_useState5","_useState6","changed","setChanged","toConsumableArray","findIndex","c","splice","defaultDish","nextLevelId","nextCustomers","App","_this","this","setState","fetch","then","res","json","getLevelsFromLocalStorage","component","Component","connect","Boolean","hostname","match","initialState","orderResultId","reducer","handlers","hasOwnProperty","createReducer","_createReducer","customerPhases","push","cookExperience","nextExperience","skillId","learnedSkill","slice","skillPleaser","registeredAction","combineReducers","actionTimestampMiddleware","store","next","nextAction","gameStartedActions","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","logger","process","LOG","createStore","applyMiddleware","thunk","ReactDOM","render","es","src_App","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.62be2fca.chunk.js","sourcesContent":["import { useSelector } from \"react-redux\";\n\nfunction baseSelector(callback) {\n  return function(state) {\n    return callback(state.game);\n  };\n}\n\nexport function createSelector(callback) {\n  return function selector(getState) {\n    if (getState) {\n      return baseSelector(callback)(\n        typeof getState === \"function\" ? getState() : getState\n      );\n    }\n    return useSelector(baseSelector(callback), []);\n  };\n}\n\nexport function isRunning(getState) {\n  return createSelector(game => game.running)(getState);\n}\n\nexport function isPaused(getState) {\n  return createSelector(game => game.paused)(getState);\n}\n\nexport function getLevels(getState) {\n  return createSelector(game => game.levels)(getState);\n}\n\nexport function getLevelId(getState) {\n  return createSelector(game => game.levelId)(getState);\n}\n\nexport function getCustomers(getState) {\n  return createSelector(game => game.customers)(getState);\n}\n\nexport function getCustomerPhase(getState) {\n  return createSelector(game => game.customerPhase)(getState);\n}\n\nexport function getCustomerIds(phase, getState) {\n  const customerPhase = getCustomerPhase(getState);\n  return Object.entries(customerPhase)\n    .map(([id, data]) => {\n      data.sort((a, b) => a.time - b.time);\n      return [id, data];\n    })\n    .filter(([id, data]) => data[data.length - 1].phase === phase)\n    .sort((a, b) => {\n      const aPhases = a[1];\n      const bPhases = b[1];\n      const aTime = aPhases[aPhases.length - 1].time;\n      const bTime = bPhases[bPhases.length - 1].time;\n      return aTime - bTime;\n    })\n    .map(([id, phase]) => id);\n}\n\nexport function getOrders(getState) {\n  return createSelector(game => game.orders)(getState);\n}\n\nexport function getCooks(getState) {\n  return createSelector(game => game.cooks)(getState);\n}\n\n/**\n * @returns {Array}\n */\nexport function getTakenOrderIds(getState) {\n  return createSelector(game => game.takenOrderIds)(getState);\n}\n\nexport function isOrderTaken(orderId, getState) {\n  const takenOrderIds = getTakenOrderIds(getState);\n  return takenOrderIds.some(id => id === orderId);\n}\n\nexport function isOrderDone(orderId, getState) {\n  const orderIdToResult = getOrderIdToResult(getState);\n  return !!orderIdToResult[orderId];\n}\n\nexport function getOrderIdToResult(getState) {\n  return createSelector(game => game.orderIdToResult)(getState);\n}\n\nexport function getActions(type, getState) {\n  const allActions = createSelector(game => game.actions)(getState);\n  return allActions.filter(action => action.action.type === type);\n}\n","import { useState, useEffect } from \"react\";\n\nexport function useCounter(\n  delay,\n  increment,\n  max = Number.MAX_SAFE_INTEGER,\n  running\n) {\n  const [count, setCount] = useState(0);\n  useEffect(() => {\n    if (running) {\n      const intervalId = setInterval(() => {\n        setCount(count => {\n          const nextCount = count + increment;\n          if (nextCount < max) {\n            return nextCount;\n          }\n          return max;\n        });\n      }, delay);\n      return () => {\n        clearInterval(intervalId);\n      };\n    }\n  }, [delay, increment, max, running]);\n\n  return {\n    count,\n    setCount\n  };\n}\n","import React from \"react\";\nimport { useCounter } from \"../hooks/counter\";\nimport { isPaused } from \"../game/selectors\";\n\nexport function GameClock() {\n  const paused = isPaused();\n  const { count } = useCounter(1000, 1000, Number.MAX_SAFE_INTEGER, !paused);\n\n  let minutes = 0;\n  let seconds = count / 1000;\n  while (seconds >= 60) {\n    minutes += 1;\n    seconds -= 60;\n  }\n  if (seconds < 10) {\n    seconds = `0${seconds}`;\n  }\n  if (minutes < 10) {\n    minutes = `0${minutes}`;\n  }\n\n  return <div data-testid={\"game-clock\"}>{`${minutes}:${seconds}`}</div>;\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Avatar } from \"antd\";\nimport { css } from \"glamor\";\n\nconst containerStyle = css({\n  label: \"info-card-container\",\n  display: \"flex\",\n  alignItems: \"center\"\n});\n\nconst bodyStyle = css({\n  display: \"inline-flex\",\n  flexDirection: \"row\",\n  alignItems: \"center\",\n  overflow: \"auto\"\n});\n\nconst nameStyle = css({\n  marginLeft: \"4px\"\n});\n\nexport function InfoCard(props) {\n  const { src, name, className, containerClassName } = props;\n\n  return (\n    <div className={containerClassName}>\n      <div className={className}>\n        <Avatar src={src} />\n        <span className={nameStyle}>{name}</span>\n      </div>\n    </div>\n  );\n}\n\nInfoCard.propTypes = {\n  src: PropTypes.string.isRequired,\n  name: PropTypes.string,\n  className: PropTypes.string,\n  containerClassName: PropTypes.string\n};\n\nInfoCard.defaultProps = {\n  className: bodyStyle.toString(),\n  containerClassName: containerStyle.toString()\n};\n","import React from \"react\";\nimport { InfoCard } from \"../../components/InfoCard\";\n\nexport function Dish({ dish }) {\n  const { name, avatar } = dish;\n\n  return <InfoCard src={avatar} name={name} />;\n}\n","export function leaveAt(order, type) {\n  const { dish, timeIncrease } = order;\n  const baseTime = (dish.maxTime * 2) / 1000;\n  let additionalTime = 0;\n  if (type === WAITING_TIME_TYPE.ORDER) {\n    additionalTime = timeIncrease * baseTime;\n  }\n  return baseTime + additionalTime;\n}\n\nexport const WAITING_TIME_TYPE = {\n  WAITING: \"WAITING\",\n  ORDER: \"ORDER\"\n};\n","import { useEffect, useRef } from \"react\";\nimport { useCounter } from \"./counter\";\n\nexport function useTimer(\n  delay,\n  increment,\n  max,\n  running,\n  onFinish,\n  resetOnFinish = false,\n  name = \"default name\"\n) {\n  const ref = useRef(false);\n  const { count, setCount } = useCounter(delay, increment, max, running);\n\n  if (count >= max && !ref.current && running) {\n    onFinish();\n    ref.current = true;\n    if (resetOnFinish) {\n      setCount(0);\n    }\n  }\n\n  useEffect(() => {\n    ref.current = false;\n  }, [delay, max, increment, running]);\n\n  return { time: count };\n}\n","import React from \"react\";\nimport { Button, Row, Col, Progress } from \"antd\";\nimport { css } from \"glamor\";\nimport { InfoCard } from \"../../components/InfoCard\";\nimport { Dish } from \"../dish/Dish\";\nimport { getOrders, isOrderTaken, isPaused } from \"../selectors\";\nimport { leaveAt, WAITING_TIME_TYPE } from \"../business\";\nimport { useTimer } from \"../../hooks/timer\";\n\nconst progressContainerStyle = css({\n  display: \"flex\",\n  flexDirection: \"row\",\n  justifyContent: \"flex-start\"\n});\n\nconst takeOrderProgressContainerStyle = css({\n  display: \"flex\",\n  flexDirection: \"column\",\n  alignItems: \"center\"\n});\n\nconst makeOrderProgressContainerStyle = css({\n  display: \"flex\",\n  flexDirection: \"column\",\n  alignItems: \"center\",\n  marginLeft: \"12px\"\n});\n\nexport function Customer({ customer, takeOrder, canMake, onTimeExceeded }) {\n  const { name, orderId, avatar } = customer;\n\n  const paused = isPaused();\n  const orders = getOrders();\n  const order = orders[orderId];\n  const orderTaken = isOrderTaken(order.id);\n\n  const takeOrderEnabled = !orderTaken;\n  const maxWaitTime = leaveAt(order, WAITING_TIME_TYPE.WAITING);\n  const { time: waitingTime } = useTimer(\n    1000,\n    1,\n    maxWaitTime,\n    paused ? false : takeOrderEnabled,\n    () => onTimeExceeded(WAITING_TIME_TYPE.WAITING, maxWaitTime)\n  );\n\n  const maxMakeTime = leaveAt(order, WAITING_TIME_TYPE.ORDER);\n  const { time: orderTime } = useTimer(\n    1000,\n    1,\n    maxMakeTime,\n    paused ? false : !takeOrderEnabled,\n    () => onTimeExceeded(WAITING_TIME_TYPE.ORDER, maxMakeTime)\n  );\n\n  return (\n    <div data-testid={`customer-id-${customer.id}`}>\n      <Row type={\"flex\"} justify={\"start\"}>\n        <Col span={8}>\n          <InfoCard src={avatar} name={name} />\n        </Col>\n        <Col span={8}>{order && <Dish dish={order.dish} />}</Col>\n        <Col span={8}>\n          <Button\n            onClick={takeOrder}\n            type=\"primary\"\n            disabled={paused || !takeOrderEnabled}\n            data-testid={`take-order-${customer.id}`}\n          >\n            Take order\n          </Button>\n        </Col>\n      </Row>\n      <Row type={\"flex\"} justify={\"start\"}>\n        <Col span={24}>\n          <div className={progressContainerStyle}>\n            <div className={takeOrderProgressContainerStyle}>\n              <div>Take order {`${waitingTime} / ${maxWaitTime}s`}</div>\n              <Progress\n                default={\"default\"}\n                type={\"line\"}\n                percent={100 - (waitingTime / maxWaitTime) * 100}\n                width={35}\n                status={!takeOrderEnabled ? \"active\" : \"normal\"}\n                strokeColor={{\n                  \"0%\": \"#e90e00\",\n                  \"100%\": \"#00d002\"\n                }}\n                format={percent => ``}\n              />\n            </div>\n            {!takeOrderEnabled && (\n              <div className={makeOrderProgressContainerStyle}>\n                <div>Make order {`${orderTime} / ${maxMakeTime}s`}</div>\n                <Progress\n                  default={\"default\"}\n                  type={\"line\"}\n                  percent={100 - (orderTime / maxMakeTime) * 100}\n                  width={35}\n                  status={\"active\"}\n                  strokeColor={{\n                    \"0%\": \"#e90e00\",\n                    \"100%\": \"#00d002\"\n                  }}\n                  format={percent => ``}\n                />\n              </div>\n            )}\n          </div>\n        </Col>\n      </Row>\n    </div>\n  );\n}\n","import faker from \"faker\";\n\nexport const CUSTOMER_PHASE = {\n  ARRIVING: \"ARRIVING\",\n  ACTIVE: \"ACTIVE\",\n  DONE: \"DONE\",\n  ANGRY: \"ANGRY\"\n};\n\nexport function createCustomer(customerData) {\n  const random = Math.floor(Math.random() * 9);\n  const customer = {\n    id: customerData.id,\n    name: faker.name.firstName(),\n    orderId: null,\n    avatar: `avatars/avatar_${random}.png`,\n    time: customerData.time\n  };\n  return customer;\n}\n","import _ from \"lodash\";\n\nexport const PREPARATION_PHASE = {\n  WAITING: \"WAITING\",\n  GATHER_INGREDIENTS: \"GATHER_INGREDIENTS\",\n  MIX: \"MIX\",\n  BAKE: \"BAKE\",\n  SERVE: \"SERVE\"\n};\n\nexport const PREPARATION_PHASE_TIME = new Proxy(\n  {\n    [PREPARATION_PHASE.GATHER_INGREDIENTS]: 6000,\n    [PREPARATION_PHASE.MIX]: 12000,\n    [PREPARATION_PHASE.BAKE]: 20000,\n    [PREPARATION_PHASE.SERVE]: 5000\n  },\n  {\n    get: (target, p, receiver) => {\n      return target[p] / 1;\n    }\n  }\n);\n\nexport const DISH = {\n  SALAD: {\n    name: \"Salad\",\n    avatar:\n      \"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/160/whatsapp/186/green-salad_1f957.png\",\n    phases: [\n      PREPARATION_PHASE.GATHER_INGREDIENTS,\n      PREPARATION_PHASE.MIX,\n      PREPARATION_PHASE.SERVE\n    ]\n  },\n  PIZZA: {\n    name: \"Pizza\",\n    avatar:\n      \"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/160/whatsapp/116/slice-of-pizza_1f355.png\",\n    phases: [\n      PREPARATION_PHASE.GATHER_INGREDIENTS,\n      PREPARATION_PHASE.MIX,\n      PREPARATION_PHASE.BAKE,\n      PREPARATION_PHASE.SERVE\n    ]\n  }\n};\n\nexport function createDish(name) {\n  if (!name) {\n    const index = _.random(0, Object.keys(DISH).length - 1, false);\n    name = Object.keys(DISH)[index];\n  }\n  const dishPrototype = DISH[name];\n  const dish = _.cloneDeep(dishPrototype);\n  dish.phase = PREPARATION_PHASE.WAITING;\n  dish.maxTime = calculateMaxTime(dish);\n  return dish;\n}\n\nfunction calculateMaxTime(dish) {\n  const { phases } = dish;\n  let time = 0;\n  phases.forEach(phase => {\n    time += PREPARATION_PHASE_TIME[phase];\n  });\n  return time;\n}\n","export function capitaliseFirst(str) {\n  return str.substr(0, 1).toUpperCase() + str.substr(1);\n}\n\nexport function removeId(map, id) {\n  return Object.values(map)\n    .filter(obj => obj.id !== id)\n    .reduce((nextMap, curr) => {\n      nextMap[curr.id] = curr;\n      return nextMap;\n    }, {});\n}\n\nexport function encode64(obj) {\n  if (obj instanceof String) {\n    return btoa(obj);\n  }\n  const str = JSON.stringify(obj);\n  return btoa(str);\n}\n\nexport function decode64(obj, asObject = true) {\n  const decoded = atob(obj);\n  if (asObject) {\n    return JSON.parse(decoded);\n  }\n  return decoded;\n}\n","import faker from \"faker\";\nimport _ from \"lodash\";\nimport { decode64, encode64 } from \"../../utils\";\n\nlet id = 0;\n\nexport function createCook() {\n  return {\n    id: ++id,\n    name: faker.name.firstName(),\n    avatar: faker.image.avatar(24, 24, true),\n    orderId: null,\n    speed: 1,\n    level: 1,\n    experience: 0,\n    nextLevel: 1,\n    skills: {},\n    skillsToTake: 0\n  };\n}\n\nexport function getFromLocalStorage() {\n  const cooks64 = localStorage.getItem(\"cooks\");\n  if (!cooks64) {\n    return [];\n  }\n\n  const cooks = Object.values(decode64(cooks64, true));\n  cooks.forEach(cook => {\n    const { skills } = cook;\n    const nextSkills = {};\n    Object.values(skills).forEach(skill => {\n      const realSkill = getSkill(skill.id);\n      realSkill.level = skill.level;\n      nextSkills[skill.id] = realSkill;\n    });\n    cook.skills = nextSkills;\n  });\n  console.log(`Loaded ${cooks.length} cooks from localStorage`);\n  return cooks;\n}\n\nexport function saveToLocalStorage(cooks) {\n  //1. cooks need to be stripped of skills first, because they contain emojis which cannot be base64'ed\n  const cooksCopy = _.cloneDeep(cooks);\n  Object.values(cooksCopy).forEach(cook => {\n    const { skills } = cook;\n    const nextSkills = {};\n    Object.values(skills).forEach(skill => {\n      nextSkills[skill.id] = {\n        id: skill.id,\n        level: skill.level\n      };\n    });\n    cook.skills = nextSkills;\n  });\n  const cooks64 = encode64(cooksCopy);\n  localStorage.setItem(\"cooks\", cooks64);\n  console.log(`Saved ${Object.values(cooks).length} cooks to localStorage`);\n}\n\nexport const SKILL_SERVER = \"SKILL_SERVER\";\nexport const SKILL_BAKER = \"SKILL_BAKER\";\nexport const SKILL_PLEASER = \"SKILL_PLEASER\";\nexport const SKILL_MIXER = \"SKILL_MIXER\";\nexport const SKILL_COOK = \"SKILL_COOK\";\nexport const SKILL_GATHERER = \"SKILL_GATHERER\";\n\nexport const SKILL = {\n  [SKILL_SERVER]: {\n    id: SKILL_SERVER,\n    name: \"Master server\",\n    description: \"Decreases serving time by 5% per skill level\",\n    takenDescription: level => `Decreases serving time by ${level * 5}%`,\n    level: 1,\n    icon: \"\"\n  },\n  [SKILL_BAKER]: {\n    id: SKILL_BAKER,\n    name: \"Master baker\",\n    description: \"Decrease baking time by 5% per skill level\",\n    takenDescription: level => `Decreases baking time by ${level * 5}%`,\n    level: 1,\n    icon: \"\"\n  },\n  [SKILL_PLEASER]: {\n    id: SKILL_PLEASER,\n    name: \"People pleaser\",\n    description:\n      \"When order phase is done, increases time the customer can wait by 2% per skill level\",\n    takenDescription: level =>\n      `When order phase is done, increases time the customer can wait by ${level *\n        2}%`,\n    level: 1,\n    icon: \"\"\n  },\n  [SKILL_MIXER]: {\n    id: SKILL_MIXER,\n    name: \"Master mixer\",\n    description: \"Decrease mixing time by 5% per skill level\",\n    takenDescription: level => `Decreases mixing time by ${level * 5}%`,\n    level: 1,\n    icon: \"\"\n  },\n  [SKILL_COOK]: {\n    id: SKILL_COOK,\n    name: \"Master cook\",\n    description: \"Decrease time of all actions by 1% per skill level\",\n    takenDescription: level => `Decreases time of all actions by ${level * 1}%`,\n    level: 1,\n    icon: \"\"\n  },\n  [SKILL_GATHERER]: {\n    id: SKILL_GATHERER,\n    name: \"Master gatherer\",\n    description: \"Decrease gathering ingredients time by 5% per skill level\",\n    takenDescription: level =>\n      `Decreases gathering ingredients time by ${level * 5}%`,\n    level: 1,\n    icon: \"\"\n  }\n};\n\nexport function getSkill(id) {\n  const skill = SKILL[id];\n  if (!skill) {\n    throw new Error(`${id} skill does not exist`);\n  }\n  return _.cloneDeep(skill);\n}\n","import _ from \"lodash\";\nimport {\n  createDish,\n  PREPARATION_PHASE,\n  PREPARATION_PHASE_TIME\n} from \"../dish/business\";\nimport {\n  SKILL_BAKER,\n  SKILL_COOK,\n  SKILL_GATHERER,\n  SKILL_MIXER\n} from \"../cook/business\";\n\nlet id = 0;\n\nexport function createOrder(dish = createDish()) {\n  const order = {\n    id: ++id,\n    dish,\n    cookId: null,\n    customerId: null,\n    timeIncrease: 0\n  };\n  return order;\n}\n\nconst PHASE_PRESENT_PARTICIPLE_MAP = {\n  [PREPARATION_PHASE.WAITING]: \"waiting\",\n  [PREPARATION_PHASE.GATHER_INGREDIENTS]: \"gathering ingredients\",\n  [PREPARATION_PHASE.MIX]: \"mixing\",\n  [PREPARATION_PHASE.BAKE]: \"baking\",\n  [PREPARATION_PHASE.SERVE]: \"serving\"\n};\n\nexport function getPresentParticiple(phase) {\n  return PHASE_PRESENT_PARTICIPLE_MAP[phase] || phase;\n}\n\nconst PHASE_VERB_MAP = {\n  [PREPARATION_PHASE.WAITING]: \"wait\",\n  [PREPARATION_PHASE.GATHER_INGREDIENTS]: \"gather ingredients\",\n  [PREPARATION_PHASE.MIX]: \"mix\",\n  [PREPARATION_PHASE.BAKE]: \"bake\",\n  [PREPARATION_PHASE.SERVE]: \"serve\"\n};\n\nexport function getVerb(phase) {\n  return PHASE_VERB_MAP[phase] || phase;\n}\n\nexport function getOrderPhaseTime(cook, order, phase) {\n  if (!cook) {\n    return null;\n  }\n  const speed = _.get(cook, \"speed\", 0);\n  const speedPercent = speed * 100;\n  const basePhaseTime = PREPARATION_PHASE_TIME[phase];\n  const decreaseFromSkill = getTimeDecreaseFromSkill(cook, phase);\n  const speedDecrease = 100 - speedPercent + decreaseFromSkill;\n  const speedMultiplier = (100 - speedDecrease) / 100;\n\n  return speedMultiplier * basePhaseTime;\n}\n\nexport function getTimeDecreaseFromSkill(cook, phase) {\n  const { skills } = cook;\n  let decrease = 0;\n  if (phase === PREPARATION_PHASE.BAKE) {\n    const baker = skills[SKILL_BAKER];\n    if (baker) {\n      decrease += baker.level * 5;\n    }\n  }\n  if (phase === PREPARATION_PHASE.GATHER_INGREDIENTS) {\n    const gatherer = skills[SKILL_GATHERER];\n    if (gatherer) {\n      decrease = gatherer.level * 5;\n    }\n  }\n  if (phase === PREPARATION_PHASE.MIX) {\n    const mixer = skills[SKILL_MIXER];\n    if (mixer) {\n      decrease = mixer.level * 5;\n    }\n  }\n  if (phase === PREPARATION_PHASE.SERVE) {\n  }\n  const cookSkill = skills[SKILL_COOK];\n  if (cookSkill) {\n    decrease += cookSkill.level;\n  }\n\n  return decrease;\n}\n","export function makeActionCreator(type, ...argNames) {\n  return function actionCreator(...args) {\n    const action = { type };\n    argNames.forEach((name, index) => {\n      action[name] = args[index];\n    });\n    return action;\n  };\n}\n\nexport function makePayloadActionCreator(type) {\n  return function payloadActionCreator(payload) {\n    return {\n      type,\n      payload\n    };\n  };\n}\n\nexport function createReducer(initialState, handlers) {\n  return function reducer(state = initialState, action) {\n    if (handlers.hasOwnProperty(action.type)) {\n      return handlers[action.type](state, action);\n    } else {\n      return state;\n    }\n  };\n}\n","import { createCustomer, CUSTOMER_PHASE } from \"./customer/business\";\nimport { createOrder } from \"./order/business\";\nimport {\n  getActions,\n  getCooks,\n  getCustomers,\n  getLevels,\n  getOrderIdToResult,\n  getOrders\n} from \"./selectors\";\nimport { makeActionCreator, makePayloadActionCreator } from \"../store/utils\";\nimport { leaveAt, WAITING_TIME_TYPE } from \"./business\";\nimport { createCook, getFromLocalStorage } from \"./cook/business\";\nimport { createDish } from \"./dish/business\";\n\nexport const GAME_STARTED = \"GAME_STARTED\";\nexport const gameStarted = makePayloadActionCreator(GAME_STARTED);\n\nexport const GAME_PAUSED = \"GAME_PAUSED\";\nexport const gamePaused = makePayloadActionCreator(GAME_PAUSED);\n\nexport const LEVELS_LOADED = \"LEVELS_LOADED\";\nexport const levelsLoaded = makePayloadActionCreator(LEVELS_LOADED);\n\nexport const GAME_STOPPED = \"GAME_STOPPED\";\nexport const gameStopped = makeActionCreator(GAME_STOPPED);\n\nexport const CUSTOMER_ADDED = \"CUSTOMER_ADDED\";\nexport const customerAdded = makePayloadActionCreator(CUSTOMER_ADDED);\n\nexport const CUSTOMER_PHASE_CHANGED = \"CUSTOMER_PHASE_CHANGED\";\nexport const customerPhaseChanged = makeActionCreator(\n  CUSTOMER_PHASE_CHANGED,\n  \"customerId\",\n  \"phase\",\n  \"time\"\n);\n\nexport const COOK_ADDED = \"COOK_ADDED\";\nexport const cookAdded = makePayloadActionCreator(COOK_ADDED);\n\nexport const COOKS_RESET = \"COOKS_RESET\";\nexport const cooksReset = makeActionCreator(COOKS_RESET);\n\nexport const ORDER_ADDED = \"ORDER_ADDED\";\nexport const orderAdded = makePayloadActionCreator(ORDER_ADDED);\n\nexport const ORDER_ATTACHED_TO_CUSTOMER = \"ORDER_ATTACHED_TO_CUSTOMER\";\nexport const orderAttachedToCustomer = makeActionCreator(\n  ORDER_ATTACHED_TO_CUSTOMER,\n  \"orderId\",\n  \"customerId\"\n);\n\nexport const ORDER_TAKEN = \"ORDER_TAKEN\";\nexport const orderTaken = makePayloadActionCreator(ORDER_TAKEN);\n\nexport const ORDER_DONE = \"ORDER_DONE\";\nexport const orderDone = makeActionCreator(\n  ORDER_DONE,\n  \"orderId\",\n  \"customerId\",\n  \"cookId\",\n  \"result\"\n);\n\nexport const ORDER_NEXT_PHASE_STARTED = \"ORDER_NEXT_PHASE_STARTED\";\nexport const orderNextPhaseStarted = makeActionCreator(\n  ORDER_NEXT_PHASE_STARTED,\n  \"orderId\",\n  \"cookId\"\n);\n\nexport const ORDER_PHASE_FINISHED = \"ORDER_PHASE_FINISHED\";\nexport const orderPhaseFinished = makeActionCreator(\n  ORDER_PHASE_FINISHED,\n  \"orderId\",\n  \"cookId\"\n);\n\nexport const COOK_GAINED_EXPERIENCE = \"COOK_GAINED_EXPERIENCE\";\nexport const cookGainedExperience = makeActionCreator(\n  COOK_GAINED_EXPERIENCE,\n  \"cookId\",\n  \"experience\"\n);\n\nexport const COOK_LEARNED_SKILL = \"COOK_LEARNED_SKILL\";\nexport const cookLearnedSkill = makeActionCreator(\n  COOK_LEARNED_SKILL,\n  \"cookId\",\n  \"skillId\"\n);\n\nexport const ACTION_REGISTERED = \"ACTION_REGISTERED\";\nexport const actionRegistered = makeActionCreator(\n  ACTION_REGISTERED,\n  \"action\",\n  \"timestamp\"\n);\n\nexport const LEVEL_FINISHED = \"LEVEL_FINISHED\";\nexport const levelFinished = makeActionCreator(LEVEL_FINISHED);\n\nexport function startGame(levelId) {\n  return function startGame(dispatch, getState) {\n    if (!levelId) {\n      levelId = Object.keys(getLevels(getState))[0];\n    }\n\n    dispatch(stopGame());\n    dispatch(loadCooks());\n\n    setTimeout(() => {\n      dispatch(startLevel(levelId));\n    }, 0);\n  };\n}\n\nexport function loadCooks() {\n  return function loadCooks(dispatch, getState) {\n    dispatch(cooksReset());\n    const cooks = getFromLocalStorage();\n    if (cooks.length === 0) {\n      dispatch(cookAdded(createCook()));\n      dispatch(cookAdded(createCook()));\n    } else {\n      cooks.forEach(cook => dispatch(cookAdded(cook)));\n    }\n  };\n}\n\nexport function startLevel(levelId = 1) {\n  return function startLevel(dispatch, getState) {\n    const levels = getLevels(getState);\n    const level = levels[levelId];\n\n    const { customers } = level;\n\n    customers.forEach(customerData => {\n      const customer = createCustomer(customerData);\n      dispatch(customerAdded(customer));\n      const order = createOrder(createDish(customerData.dish));\n      dispatch(orderAdded(order));\n      dispatch(orderAttachedToCustomer(order.id, customer.id));\n    });\n\n    dispatch(gameStarted(levelId));\n  };\n}\n\nexport function stopGame() {\n  return function stopGame(dispatch, getState) {\n    dispatch(gameStopped());\n  };\n}\n\nexport function exceedWaitingTime(customer, type, time) {\n  return function exceedWaitingTime(dispatch, getState) {\n    const order = getOrders(getState)[customer.orderId];\n    if (!order) {\n      return;\n    }\n    const maxTime = leaveAt(order, type);\n    if (time >= maxTime) {\n      dispatch(\n        customerPhaseChanged(customer.id, CUSTOMER_PHASE.ANGRY, Date.now())\n      );\n      //need to remove order as well\n      const cook = getCooks(getState)[order.cookId];\n      if (type === WAITING_TIME_TYPE.ORDER) {\n        dispatch(\n          finishOrder(order.id, customer.id, cook ? cook.id : null, {\n            percent: 0\n          })\n        );\n      }\n    }\n  };\n}\n\nexport function finishPhase(orderId, cookId) {\n  return (dispatch, getState) => {\n    dispatch(orderPhaseFinished(orderId, cookId));\n\n    const order = getOrders(getState)[orderId];\n    const customers = getCustomers(getState);\n    const customer = customers[order.customerId];\n\n    //The following needs to happen after order phase is finished\n    //1. Assigned cook gets experience\n    dispatch(cookGainedExperience(cookId, 1));\n    //2. If dish has no more phases, it means it's done\n    if (order.dish.phases.length === 0) {\n      dispatch(\n        customerPhaseChanged(order.customerId, CUSTOMER_PHASE.DONE, Date.now())\n      );\n\n      const customerActions = getActions(\n        CUSTOMER_PHASE_CHANGED,\n        getState\n      ).filter(({ action }) => action.customerId === customer.id);\n      const orderActions = getActions(ORDER_TAKEN, getState).filter(\n        ({ action }) => action.payload === orderId\n      );\n      const arrivedAtTime = arrivedAt(customerActions);\n      const orderTakenAtTime = orderTakenAt(orderActions);\n      const timeUntilTaken = orderTakenAtTime - arrivedAtTime;\n      const maxWaitTime = leaveAt(order, WAITING_TIME_TYPE.WAITING) * 1000;\n      const maxOrderTime = leaveAt(order, WAITING_TIME_TYPE.ORDER) * 1000;\n      const timeOfResultReductionWait = maxWaitTime * 0.65;\n      const timeOfResultReductionOrder = maxOrderTime * 0.65;\n      const waitReductionInterval = maxWaitTime - timeOfResultReductionWait;\n      const orderReductionInterval = maxOrderTime - timeOfResultReductionOrder;\n\n      //3. calculate penalty based on time until order was taken\n      let takingOrderPart = 50;\n      const takenTimeOver = timeUntilTaken - timeOfResultReductionWait;\n      if (takenTimeOver > 0) {\n        const reduction = takenTimeOver / waitReductionInterval;\n        takingOrderPart = round(takingOrderPart - takingOrderPart * reduction);\n      }\n\n      //4. calculate penalty based on time until order was done\n      let makingOrderPart = 50;\n      const orderDoneTimeOver =\n        doneAt(customerActions) - orderTakenAtTime - timeOfResultReductionOrder;\n      if (orderDoneTimeOver > 0) {\n        const reduction = orderDoneTimeOver / orderReductionInterval;\n        makingOrderPart = round(makingOrderPart - makingOrderPart * reduction);\n      }\n      //4. find out how much time has passed since order was taken and order was served\n      dispatch(\n        finishOrder(orderId, order.customerId, cookId, {\n          percent: takingOrderPart + makingOrderPart\n        })\n      );\n    }\n  };\n}\n\nfunction arrivedAt(actions) {\n  const activeAction = actions.filter(\n    ({ action }) => action.phase === CUSTOMER_PHASE.ACTIVE\n  )[0];\n  return activeAction.timestamp;\n}\n\nfunction doneAt(actions) {\n  const doneActions = actions.filter(\n    ({ action }) => action.phase === CUSTOMER_PHASE.DONE\n  );\n  if (doneActions.length === 0) {\n    throw new Error(\"Customer needs to have a DONE phase\");\n  }\n  return doneActions[0].timestamp;\n}\n\nfunction orderTakenAt(actions) {\n  return actions[0].timestamp;\n}\n\nfunction round(percentage) {\n  return Number(percentage.toFixed(0));\n}\n\nexport function finishOrder(orderId, customerId, cookId, result) {\n  return function finishOrder(dispatch, getState) {\n    dispatch(orderDone(orderId, customerId, cookId, result));\n\n    const orderCount = Object.values(getOrders(getState)).length;\n    const resultCount = Object.values(getOrderIdToResult(getState)).length;\n\n    if (orderCount === resultCount) {\n      dispatch(levelFinished());\n    }\n  };\n}\n","import React from \"react\";\nimport { css } from \"glamor\";\nimport PropTypes from \"prop-types\";\n\nconst containerStyle = css({\n  display: \"flex\",\n  justifyContent: \"space-between\",\n  minHeight: \"36px\",\n  alignItems: \"center\"\n});\n\nconst sectionStyle = css({\n  margin: \"4px\"\n});\n\nconst arrivingCustomersStyle = css({});\n\nconst doneCustomersStyle = css({\n  color: \"green\"\n});\n\nconst angryCustomersStyle = css({\n  color: \"red\"\n});\n\nexport function CustomerTitle(props) {\n  const {\n    arrivingCustomers,\n    doneCustomers,\n    angryCustomers,\n    totalCustomers\n  } = props;\n\n  return (\n    <div className={containerStyle}>\n      <div>\n        <span className={sectionStyle}>Customers</span>\n        <span\n          className={`${sectionStyle} ${arrivingCustomersStyle}`}\n          data-testid={\"arriving-customers\"}\n        >\n          <span role={\"img\"} aria-label={\"not done customers\"}>\n             {arrivingCustomers}\n          </span>\n        </span>\n        /\n        <span\n          className={`${sectionStyle} ${doneCustomersStyle}`}\n          data-testid={\"done-customers\"}\n        >\n          <span role={\"img\"} aria-label={\"done customers\"}>\n             {doneCustomers}\n          </span>\n        </span>\n        /\n        <span\n          className={`${sectionStyle} ${angryCustomersStyle}`}\n          data-testid={\"angry-customers\"}\n        >\n          <span role={\"img\"} aria-label={\"angry customers\"}>\n             {angryCustomers}\n          </span>\n        </span>\n      </div>\n      <span data-testid={\"total-customers\"}>{totalCustomers}</span>\n    </div>\n  );\n}\n\nCustomerTitle.propTypes = {\n  arrivingCustomers: PropTypes.number.isRequired,\n  doneCustomers: PropTypes.number.isRequired,\n  angryCustomers: PropTypes.number.isRequired,\n  totalCustomers: PropTypes.number.isRequired\n};\n","import { useTimer } from \"../hooks/timer\";\nimport PropTypes from \"prop-types\";\n\n/**\n * A component that returns null, but gives us ability to do\n * conditional hooks.\n */\nexport function EmptyTimer(props) {\n  const { delay, time, start, onFinish } = props;\n\n  useTimer(delay, 100, time, start, onFinish, \"empty timer\");\n\n  return null;\n}\n\nEmptyTimer.propTypes = {\n  time: PropTypes.number.isRequired,\n  delay: PropTypes.number,\n  start: PropTypes.bool,\n  onFinish: PropTypes.func\n};\n\nEmptyTimer.defaultProps = {\n  start: false,\n  delay: 100,\n  onFinish: () => {}\n};\n","import React from \"react\";\nimport { Customer } from \"./Customer\";\nimport { Card } from \"antd\";\nimport { getCustomerIds, getCustomers, isPaused } from \"../selectors\";\nimport {\n  customerPhaseChanged,\n  exceedWaitingTime,\n  orderTaken\n} from \"../actions\";\nimport { useDispatch } from \"react-redux\";\nimport { CustomerTitle } from \"./CustomerTitle\";\nimport { CUSTOMER_PHASE } from \"./business\";\nimport { EmptyTimer } from \"../../components/EmptyTimer\";\nimport { useTransition, animated } from \"react-spring\";\nimport { InfoCard } from \"../../components/InfoCard\";\n\nexport function Customers(props) {\n  const customers = getCustomers();\n  const activeCustomerIds = getCustomerIds(CUSTOMER_PHASE.ACTIVE);\n  const doneCustomerIds = getCustomerIds(CUSTOMER_PHASE.DONE);\n  const arrivingCustomerIds = getCustomerIds(CUSTOMER_PHASE.ARRIVING);\n  const angryCustomerIds = getCustomerIds(CUSTOMER_PHASE.ANGRY);\n  const dispatch = useDispatch();\n  const paused = isPaused();\n\n  const activeCustomers = activeCustomerIds.map(id => customers[id]);\n  const arrivingCustomers = arrivingCustomerIds.map(id => customers[id]);\n\n  const transitions = useTransition(\n    arrivingCustomers,\n    function keyTransform(customer) {\n      return customer.id;\n    },\n    {\n      from: { opacity: 0 },\n      enter: { opacity: 1 },\n      leave: { opacity: 0 },\n      config(customer, phase) {\n        if (phase === \"leave\") {\n          return { duration: 0 };\n        }\n        return { duration: customer.time };\n      }\n    }\n  );\n\n  return (\n    <Card\n      title={\n        <CustomerTitle\n          arrivingCustomers={\n            arrivingCustomerIds.length + activeCustomers.length\n          }\n          doneCustomers={doneCustomerIds.length}\n          angryCustomers={angryCustomerIds.length}\n          totalCustomers={Object.values(customers).length}\n        />\n      }\n      style={{ minHeight: \"90vh\" }}\n    >\n      {activeCustomers.map(customer => (\n        <Customer\n          customer={customer}\n          takeOrder={() => dispatch(orderTaken(customer.orderId))}\n          onTimeExceeded={(type, time) =>\n            dispatch(exceedWaitingTime(customer, type, time))\n          }\n          key={customer.id}\n        />\n      ))}\n      {arrivingCustomers.map(customer => (\n        <EmptyTimer\n          key={customer.id}\n          time={customer.time}\n          start={!paused}\n          onFinish={() => {\n            dispatch(\n              customerPhaseChanged(\n                customer.id,\n                CUSTOMER_PHASE.ACTIVE,\n                Date.now()\n              )\n            );\n          }}\n        />\n      ))}\n      {transitions.map(({ item, key, props }) => (\n        <animated.div key={key} style={props}>\n          <InfoCard src={item.avatar} name={item.name} />\n        </animated.div>\n      ))}\n    </Card>\n  );\n}\n","import React from \"react\";\nimport _ from \"lodash\";\nimport { getOrderPhaseTime, getPresentParticiple, getVerb } from \"./business\";\nimport { css } from \"glamor\";\nimport { Button, Card } from \"antd\";\nimport { InfoCard } from \"../../components/InfoCard\";\nimport { capitaliseFirst } from \"../../utils\";\nimport { useTimer } from \"../../hooks/timer\";\nimport { getCooks, getCustomers, isOrderDone, isPaused } from \"../selectors\";\nimport { finishPhase, orderNextPhaseStarted } from \"../actions\";\nimport { useDispatch } from \"react-redux\";\nimport { PREPARATION_PHASE } from \"../dish/business\";\n\nconst titleContainer = css({\n  label: \"TITLE\",\n  display: \"flex\",\n  flexDirection: \"row\",\n  justifyContent: \"space-between\",\n  alignItems: \"center\"\n});\n\nconst cookButtonsStyle = css({\n  display: \"flex\",\n  flexDirection: \"row\",\n  flexWrap: \"wrap\"\n});\n\nconst orderInProgressContainerStyle = css({\n  display: \"flex\",\n  flexDirection: \"row\",\n  alignItems: \"center\"\n});\n\nconst rowContainer = css({\n  minHeight: \"68px\",\n  display: \"flex\",\n  flexDirection: \"row\",\n  justifyContent: \"space-between\",\n  alignItems: \"center\"\n});\n\nexport function Order({ order }) {\n  const { customerId, dish, id } = order;\n  const isDone = isOrderDone(id);\n  const { phase: dishStatus } = dish;\n  const nextDishStatus = _.get(dish, \"phases[0]\", \"\");\n\n  const paused = isPaused();\n  const dispatch = useDispatch();\n  const customers = getCustomers();\n  let cooks = getCooks();\n  const customer = customers[customerId];\n\n  const currentCook = cooks[order.cookId];\n  const orderTime = getOrderPhaseTime(currentCook, order, dishStatus);\n  cooks = nextDishStatus ? Object.values(cooks) : [];\n\n  const runTimer = !!currentCook;\n  const { time } = useTimer(\n    100,\n    100,\n    orderTime || 0,\n    paused ? false : !!runTimer,\n    () => dispatch(finishPhase(order.id, currentCook.id)),\n    true\n  );\n\n  function createButtonText(cook) {\n    return `${cook.name} ${Number(\n      getOrderPhaseTime(cook, order, nextDishStatus) / 1000\n    ).toFixed(2)}s`;\n  }\n\n  function title() {\n    return (\n      <div className={titleContainer}>\n        <InfoCard src={dish.avatar} name={`Ordered by ${customer.name}`} />\n        <div>{capitaliseFirst(getPresentParticiple(dishStatus))}</div>\n      </div>\n    );\n  }\n\n  return (\n    <Card title={title()} data-testid={isDone ? null : `order-id-${order.id}`}>\n      <div className={rowContainer}>\n        <div>\n          {dish.phase === PREPARATION_PHASE.WAITING && (\n            <div>{capitaliseFirst(getVerb(nextDishStatus))}</div>\n          )}\n          {dish.phase !== PREPARATION_PHASE.WAITING && (\n            <div className={orderInProgressContainerStyle}>\n              <InfoCard\n                src={currentCook.avatar}\n                name={`${currentCook.name} is ${getPresentParticiple(\n                  dishStatus\n                )} ${Number(time / 1000).toFixed(1)} / ${orderTime / 1000}s`}\n              />\n            </div>\n          )}\n        </div>\n        <div className={cookButtonsStyle}>\n          {cooks.map(cook => (\n            <div key={cook.id}>\n              <Button\n                type={\"primary\"}\n                style={{ margin: \"4px\", height: \"100%\" }}\n                onClick={() =>\n                  dispatch(orderNextPhaseStarted(order.id, cook.id))\n                }\n                disabled={\n                  paused ||\n                  !!cook.orderId ||\n                  dish.phase !== PREPARATION_PHASE.WAITING\n                }\n                data-testid={`next-phase-${order.id}`}\n              >\n                <InfoCard src={cook.avatar} name={createButtonText(cook)} />\n              </Button>\n            </div>\n          ))}\n        </div>\n      </div>\n    </Card>\n  );\n}\n","import React from \"react\";\nimport { css } from \"glamor\";\nimport { getOrderIdToResult, getOrders } from \"../selectors\";\nimport { InfoCard } from \"../../components/InfoCard\";\n\nconst containerStyle = css({\n  display: \"flex\",\n  flexDirection: \"row\",\n  alignItems: \"center\",\n  justifyContent: \"space-between\",\n  minHeight: \"36px\"\n});\n\nconst resultsContainer = css({\n  display: \"flex\",\n  flexDirection: \"row\",\n  flexWrap: \"wrap\"\n});\n\nconst percentStyle = css({\n  marginLeft: \"4px\",\n  display: \"inline-flex\",\n  flexDirection: \"row\",\n  alignItems: \"center\"\n});\n\nexport function OrderTitle(props) {\n  const orderResults = Object.values(getOrderIdToResult());\n  const orders = getOrders();\n  let averageResult = null;\n  if (orderResults.length > 0) {\n    const sum = orderResults\n      .map(result => result.percent)\n      .reduce((prev, current) => {\n        return prev + current;\n      }, 0);\n    averageResult = (sum / orderResults.length).toFixed(1);\n  }\n\n  return (\n    <div className={containerStyle}>\n      <div>Orders {averageResult ? `[Avg: ${averageResult}%]` : null}</div>\n      <div className={resultsContainer}>\n        {orderResults\n          .sort((a, b) => b.percent - a.percent)\n          .map(result => (\n            <span\n              key={result.id}\n              data-testid={`result-${result.id}`}\n              className={percentStyle}\n            >\n              <InfoCard\n                src={orders[result.orderId].dish.avatar}\n                name={`${result.percent}%`}\n              />\n            </span>\n          ))}\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { useTransition, animated } from \"react-spring\";\nimport { Order } from \"./Order\";\nimport { getOrders, getTakenOrderIds } from \"../selectors\";\nimport { Card } from \"antd\";\nimport { OrderTitle } from \"./OrderTitle\";\n\nexport function Orders(props) {\n  const orders = getOrders();\n  const takenOrderIds = getTakenOrderIds();\n\n  const takenOrders = takenOrderIds.map(id => orders[id]);\n\n  const transitions = useTransition(takenOrders, order => order.id, {\n    from: { opacity: 0 },\n    enter: { opacity: 1 },\n    leave: { opacity: 0 }\n  });\n\n  return (\n    <Card title={<OrderTitle />} style={{ minHeight: \"90vh\" }}>\n      {transitions.map(({ item, key, props }) => (\n        <animated.div key={key} style={props}>\n          <Order order={item} />\n        </animated.div>\n      ))}\n    </Card>\n  );\n}\n","import React from \"react\";\nimport { Button, Tooltip } from \"antd\";\n\nexport function Skill({ skill, ...rest }) {\n  const { name, icon, description } = skill;\n\n  return (\n    <Tooltip title={description} placement={\"bottom\"} mouseLeaveDelay={0}>\n      <Button\n        style={{\n          display: \"flex\",\n          flexDirection: \"row\",\n          alignItems: \"center\",\n          margin: \"4px\",\n          height: \"auto\"\n        }}\n        {...rest}\n      >\n        <span role={\"img\"} style={{ fontSize: \"2rem\", marginRight: \"4px\" }}>\n          {icon}\n        </span>\n        {name}\n      </Button>\n    </Tooltip>\n  );\n}\n","import React from \"react\";\nimport { Collapse, Icon, Tag } from \"antd\";\nimport { Skill } from \"./Skill\";\nimport { SKILL } from \"./business\";\nimport { useDispatch } from \"react-redux\";\nimport { cookLearnedSkill } from \"../actions\";\n\nconst Panel = Collapse.Panel;\n\nexport function SkillPicker({ cook, disabled = false }) {\n  const { id, skillsToTake } = cook;\n  const dispatch = useDispatch();\n\n  if (!skillsToTake) {\n    return null;\n  }\n\n  return (\n    <div\n      style={{\n        display: \"flex\",\n        flexDirection: \"row\",\n        alignItems: \"center\"\n      }}\n    >\n      <Collapse\n        bordered={false}\n        expandIcon={({ isActive }) => (\n          <Icon type=\"read\" theme={isActive ? \"filled\" : \"outlined\"} />\n        )}\n      >\n        <Panel\n          key={1}\n          disabled={disabled}\n          header={\n            <span>\n              Learn new skill <Tag color=\"geekblue\">{skillsToTake}</Tag>\n            </span>\n          }\n        >\n          <div\n            style={{\n              display: \"flex\",\n              flexDirection: \"row\",\n              flexWrap: \"wrap\"\n            }}\n          >\n            {Object.values(SKILL).map(skill => (\n              <Skill\n                key={skill.id}\n                skill={skill}\n                onClick={() => dispatch(cookLearnedSkill(id, skill.id))}\n              />\n            ))}\n          </div>\n        </Panel>\n      </Collapse>\n    </div>\n  );\n}\n","import { Tag, Tooltip } from \"antd\";\nimport React from \"react\";\n\nexport function TakenSkill({ skill, ...rest }) {\n  const { level, icon, takenDescription } = skill;\n\n  const color = {\n    1: \"lime\",\n    2: \"green\",\n    3: \"cyan\",\n    4: \"blue\",\n    5: \"purple\",\n    6: \"magenta\",\n    7: \"red\",\n    8: \"volcano\",\n    9: \"orange\",\n    10: \"gold\"\n  };\n\n  return (\n    <Tooltip\n      title={takenDescription(level)}\n      placement={\"bottom\"}\n      mouseLeaveDelay={0}\n    >\n      <div\n        style={{ display: \"flex\", flexDirection: \"row\", alignItems: \"center\" }}\n      >\n        <Tag color={color[level]} style={{ marginTop: \"8px\" }}>\n          {level}\n        </Tag>\n        <span role={\"img\"} style={{ fontSize: \"2rem\", marginRight: \"4px\" }}>\n          {icon}\n        </span>\n      </div>\n    </Tooltip>\n  );\n}\n","import React from \"react\";\nimport { InfoCard } from \"../../components/InfoCard\";\nimport { Progress } from \"antd\";\nimport { css } from \"glamor\";\nimport { SkillPicker } from \"./SkillPicker\";\nimport { TakenSkill } from \"./TakenSkill\";\nimport { isPaused } from \"../selectors\";\n\nconst containerStyle = css({\n  display: \"flex\",\n  flexDirection: \"column\",\n  justifyContent: \"center\",\n  alignItems: \"flex-start\"\n});\n\nconst cookCardContainerStyle = css({\n  width: \"148px\",\n  display: \"flex\",\n  alignItems: \"center\",\n  height: \"100%\"\n});\n\nconst cookInfoStyle = css({\n  display: \"flex\",\n  flexDirection: \"row\",\n  alignItems: \"center\"\n});\n\nexport function Cook({ cook }) {\n  const paused = isPaused();\n  const { name, avatar, nextLevel, experience, skills } = cook;\n\n  const experienceProgress = Number(\n    Number((experience / nextLevel) * 100).toFixed(0)\n  );\n\n  return (\n    <div className={containerStyle}>\n      <div className={cookInfoStyle}>\n        <InfoCard\n          src={avatar}\n          name={name}\n          containerClassName={cookCardContainerStyle.toString()}\n        />\n        <div>\n          <div>\n            {`Level ${cook.level}. Experience: ${cook.experience} / ${\n              cook.nextLevel\n            }.`}\n          </div>\n          <div>{`Speed modifier: ${cook.speed}`}</div>\n        </div>\n      </div>\n      <div style={{ display: \"flex\", flexDirection: \"column\" }}>\n        <div\n          style={{ display: \"flex\", flexDirection: \"row\", flexWrap: \"wrap\" }}\n        >\n          {Object.values(skills).map(skill => (\n            <TakenSkill key={skill.id} skill={skill} />\n          ))}\n        </div>\n        <SkillPicker cook={cook} disabled={!paused} />\n      </div>\n      <Progress\n        default={\"default\"}\n        type={\"line\"}\n        percent={experienceProgress}\n        status={\"active\"}\n      />\n    </div>\n  );\n}\n","import React from \"react\";\nimport { Button } from \"antd\";\nimport { css } from \"glamor\";\nimport { saveToLocalStorage } from \"./business\";\nimport { useDispatch } from \"react-redux\";\nimport { loadCooks } from \"../actions\";\n\nconst containerStyle = css({\n  minHeight: \"36px\",\n  display: \"flex\",\n  justifyContent: \"space-between\",\n  alignItems: \"center\"\n});\n\nexport function CooksTitle(props) {\n  const dispatch = useDispatch();\n  return (\n    <div className={containerStyle}>\n      <div>Cooks</div>\n      <Button\n        onClick={() => {\n          saveToLocalStorage({});\n          dispatch(loadCooks());\n        }}\n      >\n        Reset\n      </Button>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { Cook } from \"./Cook\";\nimport { getCooks } from \"../selectors\";\nimport { Card } from \"antd\";\nimport { CooksTitle } from \"./CooksTitle\";\n\nexport function Cooks(props) {\n  const cooks = getCooks();\n\n  return (\n    <Card title={<CooksTitle />} style={{ minHeight: \"90vh\" }}>\n      {Object.values(cooks).map(cook => (\n        <Cook cook={cook} key={cook.id} />\n      ))}\n    </Card>\n  );\n}\n","import React from \"react\";\nimport { css } from \"glamor\";\nimport { Col, Row } from \"antd\";\nimport { getLevelId, isRunning } from \"./selectors\";\nimport { GameClock } from \"../components/GameClock\";\nimport { Customers } from \"./customer/Customers\";\nimport { Orders } from \"./order/Orders\";\nimport { Cooks } from \"./cook/Cooks\";\n\nconst containerStyle = css({\n  display: \"flex\",\n  flexDirection: \"column\"\n});\n\nconst gamePanelsContainer = css({\n  display: \"flex\",\n  flexDirection: \"row\",\n  width: \"100%\",\n  justifyContent: \"space-between\"\n});\n\nexport function Game(props) {\n  const running = isRunning();\n  const levelId = getLevelId();\n\n  if (!running) {\n    return null;\n  }\n\n  return (\n    <div className={containerStyle}>\n      <div\n        style={{\n          display: \"flex\",\n          justifyContent: \"center\",\n          flexDirection: \"column\",\n          alignItems: \"center\"\n        }}\n      >\n        <div>{`Level: ${levelId}`}</div>\n        <GameClock />\n      </div>\n      <div className={gamePanelsContainer}>\n        <div style={{ flex: 1 }}>\n          <Customers />\n        </div>\n        <Row style={{ flex: 3, display: \"flex\", flexDirection: \"row\" }}>\n          <Col span={16}>\n            <Orders />\n          </Col>\n          <Col span={8}>\n            <Cooks />\n          </Col>\n        </Row>\n      </div>\n    </div>\n  );\n}\n","export function getPathname() {\n  return window.location.pathname;\n}\n\nexport function redirect(path) {\n  window.history.pushState(null, \"Something\", path);\n}\n","import React, { useState } from \"react\";\nimport { Button } from \"antd\";\nimport { getLevels, isPaused, isRunning } from \"./selectors\";\nimport { gamePaused, startGame, stopGame } from \"./actions\";\nimport { useDispatch } from \"react-redux\";\nimport { redirect } from \"../history\";\n\nexport function GameStart(props) {\n  const running = isRunning();\n  const paused = isPaused();\n  const dispatch = useDispatch();\n  const levels = getLevels() || {};\n\n  const [level, setLevel] = useState(0);\n\n  return (\n    <div style={{ textAlign: \"center\" }}>\n      <div style={{ textAlign: \"center\" }}>Game options</div>\n      <div\n        style={{\n          display: \"flex\",\n          flexDirection: \"column\",\n          justifyContent: \"center\",\n          alignItems: \"center\"\n        }}\n      >\n        {running && (\n          <div>\n            <Button onClick={() => dispatch(stopGame())} type={\"danger\"}>\n              Stop\n            </Button>\n            <Button\n              onClick={() => dispatch(gamePaused(!paused))}\n              type={\"danger\"}\n              data-testid={\"pause-game\"}\n            >\n              {paused ? \"Resume\" : \"Pause\"}\n            </Button>\n          </div>\n        )}\n        <div\n          style={{\n            display: \"flex\",\n            flexDirection: \"row\",\n            alignItems: \"center\"\n          }}\n        >\n          <div>Level select</div>\n          <Button\n            onClick={() => {\n              dispatch(startGame(level));\n            }}\n          >\n            Start level\n          </Button>\n          <select\n            onChange={e =>\n              setLevel(Object.keys(levels)[e.target.selectedIndex])\n            }\n          >\n            {Object.entries(levels).map(([id, level]) => (\n              <option value={id} key={id}>\n                {id}\n              </option>\n            ))}\n          </select>\n          <Button\n            type={\"danger\"}\n            data-testid={\"level-editor\"}\n            onClick={() => {\n              redirect(\"/leveleditor\");\n            }}\n          >\n            Level editor\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { isRunning } from \"./selectors\";\n\nexport function GameInfo(props) {\n  const running = isRunning();\n\n  if (running) {\n    return null;\n  }\n\n  return (\n    <div style={{ textAlign: \"center\" }}>\n      <div style={{ borderBottom: \"1px solid gray\", margin: 12 }} />\n      <div>Hello!</div>\n      <div>Welcome to my 'restaurant' simulator game.</div>\n      <div>\n        Customers will come to your restaurant, you will get their orders and\n        serve them food.\n      </div>\n      <div style={{ borderBottom: \"1px solid gray\", margin: 12 }} />\n    </div>\n  );\n}\n","import React from \"react\";\n\nconst style = { textAlign: \"center\" };\n\nexport function H1({ children }) {\n  return <h1 style={style}>{children}</h1>;\n}\n","import { getLevels } from \"../game/selectors\";\nimport { decode64, encode64 } from \"../utils\";\n\nexport function validateLevel(level) {\n  const { id, customers } = level;\n\n  const errors = {\n    customers: {},\n    isValid: true\n  };\n\n  if (!id) {\n    errors.id = \"Level needs a name\";\n    errors.isValid = false;\n  }\n\n  if (customers.length === 0) {\n    errors.customerAmount = \"Needs at least 1 customer\";\n    errors.isValid = false;\n  }\n\n  customers.forEach(customer => {\n    const customerError = {\n      name: \"\",\n      dish: \"\",\n      time: \"\"\n    };\n    if (!customer.name) {\n      customerError.name = \"Name cannot be empty\";\n      errors.isValid = false;\n    }\n    if (!customer.dish) {\n      customerError.dish = \"Dish cannot be empty\";\n      errors.isValid = false;\n    }\n    if (customer.time < 0) {\n      customerError.time = \"Time cannot be negative\";\n      errors.isValid = false;\n    }\n    errors.customers[customer.id] = customerError;\n  });\n\n  return errors;\n}\n\nexport function saveLevelToLocalStorage(level, getState) {\n  if (!level.id) {\n    return;\n  }\n  const levels = getLevels(getState);\n  levels[level.id] = level;\n  saveLevelsToLocalStorage(levels);\n  console.log(`Saved level ${level.id} to localStorage`);\n}\n\nexport function saveLevelsToLocalStorage(levels) {\n  const base64 = encode64(levels);\n  localStorage.setItem(\"levels\", base64);\n  console.log(`Saved ${Object.values(levels).length} levels to localStorage`);\n}\n\nexport function getLevelsFromLocalStorage() {\n  const base64 = localStorage.getItem(\"levels\");\n  if (!base64) {\n    return {};\n  }\n  return decode64(base64, true);\n}\n\n/**\n * Loads a level.\n */\nexport function loadLevel(str) {\n  if (!str || typeof str !== \"string\") {\n    throw Error(`Invalid string ${str}`);\n  }\n  //1. attempts to decode string from base64\n  try {\n    return decode64(str, true);\n  } catch (e) {\n    console.log(`${str} is not in base64`);\n  }\n  //2. if that failed try to see if this is parseable json\n  try {\n    str = JSON.parse(str);\n  } catch (e) {\n    console.log(`${str} is not a parseable json`);\n    throw new Error(`Invalid input ${str}`);\n  }\n\n  const errors = validateLevel(str);\n  if (!errors.isValid) {\n    console.log(`Invalid level ${str}`);\n    throw new Error(`Invalid level ${str}`);\n  }\n  return str;\n}\n","import { Button, Input } from \"antd\";\nimport { loadLevel, saveLevelToLocalStorage } from \"./business\";\nimport { levelsLoaded } from \"../game/actions\";\nimport React, { useState } from \"react\";\nimport { useDispatch, useStore } from \"react-redux\";\n\nexport function ImportExportLevel(props) {\n  const { id, setId, customers, levels, setCustomers } = props;\n  const dispatch = useDispatch();\n  const getState = useStore().getState;\n  const [levelInput, setLevelInput] = useState(\"\");\n\n  return (\n    <>\n      <Input\n        addonBefore={\"Load level\"}\n        placeholder={\n          \"Paste exported level or pastebin link with exported level\"\n        }\n        onChange={e => setLevelInput(e.target.value)}\n      />\n      <Button\n        type={\"danger\"}\n        onClick={() => {\n          try {\n            setId(null);\n            const level = loadLevel(levelInput);\n            const nextLevels = { ...levels };\n            nextLevels[level.id] = level;\n            dispatch(levelsLoaded(nextLevels));\n            saveLevelToLocalStorage(level, getState);\n            setId(level.id);\n            setCustomers(level.customers);\n          } catch (e) {}\n        }}\n      >\n        Load\n      </Button>\n      <Button\n        type={\"danger\"}\n        onClick={() => {\n          const str = JSON.stringify({ id, customers });\n          const input = document.createElement(\"input\");\n          input.value = str;\n          document.body.appendChild(input);\n          input.select();\n          document.execCommand(\"copy\");\n          document.body.removeChild(input);\n        }}\n      >\n        Export\n      </Button>\n    </>\n  );\n}\n","import React from \"react\";\nimport { Card, Icon, Input, InputNumber, Select } from \"antd\";\nimport { createDish, DISH } from \"../game/dish/business\";\nimport { Dish } from \"../game/dish/Dish\";\nimport { css } from \"glamor\";\n\nconst Option = Select.Option;\n\nconst customerCardTitleStyle = css({\n  display: \"flex\",\n  flexDirection: \"row\",\n  alignItems: \"center\"\n});\n\nconst errorStyle = css({\n  color: \"red\"\n});\n\nconst customerContainer = css({\n  margin: \"4px\",\n  display: \"flex\",\n  flexDirection: \"row\",\n  justifyContent: \"center\",\n  alignItems: \"center\"\n});\n\nexport function CustomerEditor(props) {\n  const { customer, onCustomerChange, errors, removeCustomer } = props;\n\n  function errorComponent(error) {\n    if (!error) return null;\n    return <div className={errorStyle}>{error}</div>;\n  }\n\n  return (\n    <Card\n      key={customer.id}\n      style={{ width: \"30%\" }}\n      title={\n        <div className={customerCardTitleStyle}>\n          <Icon type=\"smile\" theme=\"outlined\" />\n          <Input\n            addonBefore={\"Customer name\"}\n            value={customer.name}\n            allowClear\n            onChange={e => {\n              onCustomerChange(customer, \"name\", e.target.value);\n            }}\n            style={{ width: \"200\" }}\n          />\n          <Icon\n            type=\"delete\"\n            theme={\"filled\"}\n            onClick={() => {\n              removeCustomer(customer);\n            }}\n          />\n          <div>{errorComponent(errors.customers[customer.id].name)}</div>\n        </div>\n      }\n    >\n      <div className={customerContainer}>\n        <div>\n          <div>Dish</div>\n          <Select\n            showSearch\n            style={{ width: 200 }}\n            placeholder=\"Select a dish\"\n            optionFilterProp=\"children\"\n            onChange={value => {\n              onCustomerChange(customer, \"dish\", value);\n            }}\n            filterOption={(input, option) =>\n              option.key.toUpperCase().indexOf(input.toUpperCase()) >= 0\n            }\n            value={customer.dish.toUpperCase()}\n          >\n            {Object.values(DISH)\n              .map(dish => dish.name.toUpperCase())\n              .map(name => createDish(name))\n              .map(dish => (\n                <Option value={dish.name.toUpperCase()} key={dish.name}>\n                  <Dish dish={dish} />\n                </Option>\n              ))}\n          </Select>\n          <div>{errorComponent(errors.customers[customer.id].dish)}</div>\n        </div>\n        <div>\n          <div>Time {errorComponent(errors.customers[customer.id].time)}</div>\n          <InputNumber\n            value={customer.time}\n            onChange={value => onCustomerChange(customer, \"time\", value)}\n          />\n        </div>\n      </div>\n    </Card>\n  );\n}\n","import React, { useState } from \"react\";\nimport { Button, Input } from \"antd\";\nimport { redirect } from \"../history\";\nimport { css } from \"glamor\";\nimport faker from \"faker\";\nimport { DISH } from \"../game/dish/business\";\nimport {\n  saveLevelsToLocalStorage,\n  saveLevelToLocalStorage,\n  validateLevel\n} from \"./business\";\nimport { getLevels } from \"../game/selectors\";\nimport { useDispatch, useStore } from \"react-redux\";\nimport { levelsLoaded } from \"../game/actions\";\nimport { ImportExportLevel } from \"./ImportExportLevel\";\nimport { CustomerEditor } from \"./CustomerEditor\";\n\nconst buttonContainerStyle = css({\n  display: \"flex\",\n  flexDirection: \"row\",\n  justifyContent: \"center\",\n  maxWidth: \"1000px\",\n  flexWrap: \"wrap\",\n  alignSelf: \"center\"\n});\n\nconst nameContainerStyle = css({\n  margin: \"4px\",\n  display: \"flex\",\n  flexDirection: \"row\",\n  justifyContent: \"center\",\n  alignItems: \"center\"\n});\n\nconst addCustomerButtonStyle = css({\n  margin: \"4px\",\n  display: \"flex\",\n  flexDirection: \"row\",\n  justifyContent: \"center\"\n});\n\nconst customersContainerStyle = css({\n  margin: \"4px\",\n  display: \"flex\",\n  flexDirection: \"row\",\n  flexWrap: \"wrap\",\n  justifyContent: \"center\",\n  alignItems: \"center\"\n});\n\nconst errorStyle = css({\n  color: \"red\"\n});\n\nlet nextCustomerId = 0;\n\nexport function LevelEditor(props) {\n  const getState = useStore().getState;\n  const dispatch = useDispatch();\n  const levels = getLevels() || {};\n  const [id, setId] = useState(\"\");\n  const [customers, setCustomers] = useState([]);\n  const [changed, setChanged] = useState(false);\n\n  function onCustomerChange(customer, key, value) {\n    customer[key] = value;\n    setCustomers([...customers]);\n    setChanged(true);\n  }\n\n  const errors = validateLevel({\n    id,\n    customers\n  });\n\n  function removeCustomer(customer) {\n    const index = customers.findIndex(c => c.id === customer.id);\n    if (index > -1) {\n      customers.splice(index, 1);\n      setCustomers([...customers]);\n    }\n  }\n\n  function errorComponent(error) {\n    if (!error) return null;\n    return <div className={errorStyle}>{error}</div>;\n  }\n\n  const defaultDish = Object.values(DISH)[0].name.toUpperCase();\n\n  return (\n    <div style={{ width: \"100%\", display: \"flex\", flexDirection: \"column\" }}>\n      <div className={buttonContainerStyle}>\n        <Button type={\"danger\"} onClick={() => redirect(\"/\")}>\n          Back\n        </Button>\n        <Button\n          type={\"danger\"}\n          onClick={() => {\n            setCustomers([]);\n            setId(\"\");\n          }}\n        >\n          Reset level\n        </Button>\n        <Button\n          type={\"danger\"}\n          onClick={() => {\n            customers.sort((a, b) => a.time - b.time);\n            setCustomers([...customers]);\n          }}\n        >\n          Sort customers by time\n        </Button>\n        <select\n          onChange={e => {\n            const nextLevelId = Object.keys(levels)[e.target.selectedIndex - 1];\n            const nextLevel = levels[nextLevelId];\n            const nextCustomers = nextLevel.customers.map(customer => {\n              const name = customer.name || faker.name.firstName();\n              return {\n                ...customer,\n                name\n              };\n            });\n            setCustomers(nextCustomers);\n            setId(nextLevelId);\n            setChanged(true);\n          }}\n          value={id}\n        >\n          <option value={\"\"}>-</option>\n          {Object.entries(levels).map(([id, level]) => (\n            <option value={id} key={id}>\n              {id}\n            </option>\n          ))}\n        </select>\n        <Button\n          type={\"danger\"}\n          onClick={() => {\n            const errors = validateLevel({ id, customers });\n            if (!errors.isValid) {\n              console.log(\"Level invalid, cannot save\", errors);\n              return;\n            }\n            saveLevelToLocalStorage(\n              {\n                id,\n                customers\n              },\n              getState\n            );\n            setChanged(false);\n            const nextLevels = { ...levels };\n            nextLevels[id] = { id, customers };\n            dispatch(levelsLoaded(nextLevels));\n          }}\n        >\n          Save {changed ? `*` : null}\n        </Button>\n        <Button\n          type={\"danger\"}\n          onClick={() => {\n            const nextLevels = { ...levels };\n            delete nextLevels[id];\n            saveLevelsToLocalStorage(nextLevels);\n            dispatch(levelsLoaded(nextLevels));\n          }}\n        >\n          Delete level\n        </Button>\n        <div style={{ display: \"flex\", flexDirection: \"row\" }}>\n          <ImportExportLevel\n            id={id}\n            setId={setId}\n            levels={levels}\n            customers={customers}\n            setCustomers={setCustomers}\n          />\n        </div>\n      </div>\n      <div className={nameContainerStyle}>\n        <Input\n          placeholder={\"Level name\"}\n          value={id}\n          allowClear\n          addonBefore={\"Level name\"}\n          onChange={e => {\n            setId(e.target.value);\n          }}\n          style={{ width: \"25%\" }}\n        />\n        <div>{errorComponent(errors.id)}</div>\n      </div>\n      <div className={addCustomerButtonStyle}>\n        <Button\n          type={\"danger\"}\n          onClick={() => {\n            setCustomers([\n              ...customers,\n              {\n                id: ++nextCustomerId,\n                name: faker.name.firstName(),\n                time: 0,\n                dish: defaultDish\n              }\n            ]);\n          }}\n        >\n          Add customer\n        </Button>\n      </div>\n      <div className={customersContainerStyle}>\n        {customers.map((customer, index) => {\n          return (\n            <CustomerEditor\n              key={customer.id}\n              customer={customer}\n              errors={errors}\n              onCustomerChange={onCustomerChange}\n              removeCustomer={removeCustomer}\n            />\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n","import React, { Component } from \"react\";\nimport { Game } from \"./game/Game\";\nimport { GameStart } from \"./game/GameStart\";\nimport { GameInfo } from \"./game/GameInfo\";\nimport \"antd/dist/antd.css\";\nimport { H1 } from \"./components/H1\";\nimport { LevelEditor } from \"./levelEditor/LevelEditor\";\nimport { getPathname } from \"./history\";\nimport { levelsLoaded } from \"./game/actions\";\nimport { connect } from \"react-redux\";\nimport { getLevelsFromLocalStorage } from \"./levelEditor/business\";\n\nclass App extends Component {\n  componentDidMount() {\n    this.pathname = getPathname();\n    //poor man's history listener\n    setInterval(() => {\n      const pathname = getPathname();\n      if (this.pathname !== pathname) {\n        this.pathname = pathname;\n        this.setState({});\n      }\n    }, 50);\n\n    fetch(\"levels.json\")\n      .then(res => res.json())\n      .then(res => {\n        console.log(\"pls\");\n        const levels = getLevelsFromLocalStorage();\n        this.props.dispatch(\n          levelsLoaded({\n            ...res,\n            ...levels\n          })\n        );\n      });\n  }\n\n  render() {\n    const pathname = getPathname();\n    let component = (\n      <>\n        <GameInfo />\n        <GameStart />\n        <Game />\n      </>\n    );\n\n    if (pathname === \"/leveleditor\") {\n      component = <LevelEditor />;\n    }\n\n    return (\n      <>\n        <H1>Customers</H1>\n        {component}\n      </>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {};\n};\n\nexport default connect(\n  mapStateToProps,\n  null\n)(App);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { createReducer } from \"../store/utils\";\nimport {\n  COOK_ADDED,\n  COOK_GAINED_EXPERIENCE,\n  CUSTOMER_ADDED,\n  CUSTOMER_PHASE_CHANGED,\n  ACTION_REGISTERED,\n  GAME_STARTED,\n  GAME_STOPPED,\n  LEVELS_LOADED,\n  ORDER_ADDED,\n  ORDER_ATTACHED_TO_CUSTOMER,\n  ORDER_DONE,\n  ORDER_NEXT_PHASE_STARTED,\n  ORDER_PHASE_FINISHED,\n  ORDER_TAKEN,\n  LEVEL_FINISHED,\n  COOKS_RESET,\n  GAME_PAUSED,\n  COOK_LEARNED_SKILL\n} from \"./actions\";\nimport { CUSTOMER_PHASE } from \"./customer/business\";\nimport { getSkill, saveToLocalStorage, SKILL_PLEASER } from \"./cook/business\";\nimport { PREPARATION_PHASE } from \"./dish/business\";\n\nconst initialState = {\n  running: false,\n  paused: false,\n  customers: {},\n  cooks: {},\n  orders: {},\n  customerPhase: {},\n  takenOrderIds: [],\n  orderIdToResult: {},\n  actions: [],\n  levelId: null,\n  levels: null\n};\n\nlet orderResultId = 0;\n\nfunction customerAdded(state, { payload: customer }) {\n  const customers = { ...state.customers };\n  customers[customer.id] = customer;\n  const customerPhase = { ...state.customerPhase };\n  customerPhase[customer.id] = [\n    {\n      phase: CUSTOMER_PHASE.ARRIVING,\n      time: Date.now()\n    }\n  ];\n  return { ...state, customers, customerPhase };\n}\n\nfunction customerPhaseChanged(state, action) {\n  const { customerId, phase, time } = action;\n  const customerPhase = { ...state.customerPhase };\n  const customerPhases = [...customerPhase[customerId]];\n  customerPhases.push({\n    phase,\n    time\n  });\n  customerPhase[customerId] = customerPhases;\n\n  const orderIdToResult = { ...state.orderIdToResult };\n  const orderId = state.customers[customerId].orderId;\n  if (phase === CUSTOMER_PHASE.ANGRY) {\n    orderIdToResult[orderId] = { percent: 0, orderId, id: ++orderResultId };\n  }\n\n  return { ...state, customerPhase, orderIdToResult };\n}\n\nfunction cookAdded(state, { payload: cook }) {\n  const cooks = { ...state.cooks };\n  cooks[cook.id] = cook;\n  return { ...state, cooks };\n}\n\nfunction cookGainedExperience(state, action) {\n  const { cookId, experience } = action;\n  const cooks = { ...state.cooks };\n  const cook = { ...cooks[cookId] };\n  const { experience: cookExperience, nextLevel } = cook;\n  const nextExperience = cookExperience + experience;\n  if (nextExperience >= nextLevel) {\n    cook.level += 1;\n    cook.experience = 0;\n    cook.speed -= 0.01;\n    cook.nextLevel = nextLevel * 2;\n    cook.skillsToTake += 1;\n  } else {\n    cook.experience = nextExperience;\n  }\n  cooks[cookId] = cook;\n  return { ...state, cooks };\n}\n\nfunction cookLearnedSkill(state, action) {\n  const { cookId, skillId } = action;\n  const cooks = { ...state.cooks };\n  const cook = { ...cooks[cookId] };\n  cook.skillsToTake -= 1;\n  const learnedSkill = cook.skills[skillId];\n  if (learnedSkill) {\n    learnedSkill.level += 1;\n    cook.skills[skillId] = learnedSkill;\n  } else {\n    cook.skills[skillId] = getSkill(skillId);\n  }\n  cooks[cookId] = cook;\n  const orderCount = Object.values(state.orders).length;\n  const resultCount = Object.values(state.orderIdToResult).length;\n\n  if (orderCount === resultCount) {\n    saveToLocalStorage(state.cooks);\n  }\n  return { ...state, cooks };\n}\n\nfunction orderAdded(state, { payload: order }) {\n  const orders = { ...state.orders };\n  orders[order.id] = order;\n  return { ...state, orders };\n}\n\nfunction orderAttachedToCustomer(state, action) {\n  const { customerId, orderId } = action;\n  const orders = { ...state.orders };\n  const order = { ...orders[orderId] };\n  order.customerId = customerId;\n  orders[orderId] = order;\n\n  const customers = { ...state.customers };\n  const customer = { ...customers[customerId] };\n  customer.orderId = orderId;\n  customers[customerId] = customer;\n  return { ...state, orders, customers };\n}\n\nfunction orderTaken(state, { payload: orderId }) {\n  const takenOrderIds = [...state.takenOrderIds];\n  takenOrderIds.push(orderId);\n  return { ...state, takenOrderIds };\n}\n\nfunction orderNextPhaseStarted(state, action) {\n  const { orderId, cookId } = action;\n  const cooks = { ...state.cooks };\n  const cook = { ...cooks[cookId] };\n  cook.orderId = orderId;\n  cooks[cookId] = cook;\n\n  const orders = { ...state.orders };\n  const order = { ...orders[orderId] };\n  const dish = { ...order.dish };\n  dish.phase = dish.phases[0];\n  dish.phases = dish.phases.slice(1);\n  order.dish = dish;\n  order.cookId = cookId;\n  orders[orderId] = order;\n\n  return { ...state, cooks, orders };\n}\n\nfunction orderPhaseFinished(state, action) {\n  const { orderId, cookId } = action;\n\n  const cooks = { ...state.cooks };\n  const cook = { ...cooks[cookId] };\n  cook.orderId = null;\n  cooks[cookId] = cook;\n\n  const orders = { ...state.orders };\n  const order = { ...orders[orderId] };\n  const dish = { ...order.dish };\n  dish.phase = PREPARATION_PHASE.WAITING;\n  order.dish = dish;\n  order.cookId = null;\n\n  const skillPleaser = cook.skills[SKILL_PLEASER];\n  if (skillPleaser) {\n    const level = skillPleaser.level;\n    order.timeIncrease += level * 0.02;\n  }\n  orders[orderId] = order;\n\n  return {\n    ...state,\n    cooks,\n    orders\n  };\n}\n\nfunction orderDone(state, action) {\n  const { orderId, cookId, result } = action;\n  const takenOrderIds = [...state.takenOrderIds];\n  const index = takenOrderIds.findIndex(id => id === orderId);\n  if (index > -1) {\n    takenOrderIds.splice(index, 1);\n  }\n\n  const cooks = { ...state.cooks };\n  const cook = cooks[cookId];\n  if (cook) {\n    cook.orderId = null;\n    cooks[cookId] = cook;\n  }\n\n  const orderIdToResult = { ...state.orderIdToResult };\n  orderIdToResult[orderId] = {\n    ...result,\n    orderId,\n    id: ++orderResultId\n  };\n\n  return { ...state, takenOrderIds, orderIdToResult };\n}\n\nexport function actionRegistered(state, action) {\n  const { action: registeredAction, timestamp } = action;\n  const actions = [...state.actions];\n  actions.push({ action: registeredAction, timestamp });\n  return { ...state, actions };\n}\n\nexport const reducer = createReducer(initialState, {\n  [LEVELS_LOADED]: function levelsLoaded(state, { payload }) {\n    return { ...state, levels: payload };\n  },\n  [LEVEL_FINISHED]: function levelFinished(state, action) {\n    saveToLocalStorage(state.cooks);\n    return { ...state, paused: true };\n  },\n  [GAME_STARTED]: function gameStarted(state, { payload }) {\n    return { ...state, running: true, levelId: payload };\n  },\n  [GAME_STOPPED]: function gameStopped(state) {\n    const levels = { ...state.levels };\n    return {\n      ...initialState,\n      levels\n    };\n  },\n  [GAME_PAUSED]: function gamePaused(state, action) {\n    return { ...state, paused: action.payload };\n  },\n  [CUSTOMER_ADDED]: customerAdded,\n  [CUSTOMER_PHASE_CHANGED]: customerPhaseChanged,\n  [COOK_ADDED]: cookAdded,\n  [COOKS_RESET]: function cooksReset(state, action) {\n    return { ...state, cooks: {} };\n  },\n  [COOK_GAINED_EXPERIENCE]: cookGainedExperience,\n  [COOK_LEARNED_SKILL]: cookLearnedSkill,\n  [ORDER_ADDED]: orderAdded,\n  [ORDER_ATTACHED_TO_CUSTOMER]: orderAttachedToCustomer,\n  [ORDER_TAKEN]: orderTaken,\n  [ORDER_DONE]: orderDone,\n  [ORDER_NEXT_PHASE_STARTED]: orderNextPhaseStarted,\n  [ORDER_PHASE_FINISHED]: orderPhaseFinished,\n  [ACTION_REGISTERED]: actionRegistered\n});\n","import { combineReducers } from \"redux\";\nimport { reducer as game } from \"../game/reducer\";\n\nexport const reducer = combineReducers({\n  game\n});\n","import {\n  ACTION_REGISTERED,\n  actionRegistered,\n  GAME_STARTED\n} from \"../game/actions\";\n\n/**\n * The purpose of this middleware is to store all actions as they happen\n * and add a timestamp to them.\n * GAME_STARTED action gets a Date.now() value as timestamp.\n * Other actions have timestamp values relative to GAME_STARTED,\n * in milliseconds since GAME_STARTED happened.\n */\nexport const actionTimestampMiddleware = store => next => action => {\n  const nextAction = next(action);\n  if (nextAction.type !== ACTION_REGISTERED) {\n    let timestamp = Date.now();\n    if (nextAction.type !== GAME_STARTED) {\n      const state = store.getState();\n      const actions = state.game.actions;\n      const gameStartedActions = actions.filter(\n        ({ action }) => action.type === GAME_STARTED\n      );\n      if (gameStartedActions.length > 0) {\n        timestamp = Date.now() - gameStartedActions[0].timestamp;\n      }\n    }\n    store.dispatch(actionRegistered(action, timestamp));\n  }\n  return nextAction;\n};\n","import { applyMiddleware, compose, createStore } from \"redux\";\nimport thunk from \"redux-thunk\";\nimport { reducer } from \"./reducer\";\nimport { actionTimestampMiddleware } from \"../middleware/actionTimestampMiddleware\";\nimport { ACTION_REGISTERED } from \"../game/actions\";\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nconst logger = store => next => action => {\n  if (process.env.LOG && action.type !== ACTION_REGISTERED) {\n    console.log(action);\n  }\n  return next(action);\n};\n\nexport const store = createNewStore();\n\nexport function createNewStore() {\n  return createStore(\n    reducer,\n    composeEnhancers(applyMiddleware(thunk, actionTimestampMiddleware, logger))\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport { Provider } from \"react-redux\";\nimport { store } from \"./store/store\";\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}