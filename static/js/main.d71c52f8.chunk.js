(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1286:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(9),i=n.n(c),l=n(7),o=n(28),s=n(39),u=n(34),m=n(33),d=n(35),f=n(11),v=n(62),E=n(30),p=n(20),O=n(17);function b(e){return function(t){return e(t.game)}}function j(e){return function(t){return t?b(e)("function"===typeof t?t():t):Object(O.d)(b(e),[])}}function g(e){return j(function(e){return e.running})(e)}function I(e){return j(function(e){return e.paused})(e)}function h(e){return j(function(e){return e.levels})(e)}function y(e){return j(function(e){return e.customers})(e)}function k(e,t){var n=function(e){return j(function(e){return e.customerPhase})(e)}(t);return Object.entries(n).map(function(e){var t=Object(p.a)(e,2),n=t[0],a=t[1];return a.sort(function(e,t){return e.time-t.time}),[n,a]}).filter(function(t){var n=Object(p.a)(t,2),a=(n[0],n[1]);return a[a.length-1].phase===e}).sort(function(e,t){var n=e[1],a=t[1];return n[n.length-1].time-a[a.length-1].time}).map(function(e){var t=Object(p.a)(e,2),n=t[0];t[1];return n})}function x(e){return j(function(e){return e.orders})(e)}function D(e){return j(function(e){return e.cooks})(e)}function R(e){return j(function(e){return e.takenOrderIds})(e)}function N(e){return j(function(e){return e.orderIdToResult})(e)}function C(e,t){return j(function(e){return e.actions})(t).filter(function(t){return t.action.type===e})}function S(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_SAFE_INTEGER,r=arguments.length>3?arguments[3]:void 0,c=Object(a.useState)(0),i=Object(p.a)(c,2),l=i[0],o=i[1];return Object(a.useEffect)(function(){if(r){var a=setInterval(function(){o(function(e){var a=e+t;return a<n?a:n})},e);return function(){clearInterval(a)}}},[e,t,n,r]),{count:l,setCount:o}}function A(){for(var e=I(),t=0,n=S(1e3,1e3,Number.MAX_SAFE_INTEGER,!e).count/1e3;n>=60;)t+=1,n-=60;return n<10&&(n="0".concat(n)),t<10&&(t="0".concat(t)),r.a.createElement("div",{"data-testid":"game-clock"},"".concat(t,":").concat(n))}var T=n(81),w=n(1290),_=n(1287),G=Object(f.css)({label:"info-card-container",display:"flex",alignItems:"center"}),L=Object(f.css)({display:"inline-flex",flexDirection:"row",alignItems:"center",overflow:"auto"}),M=Object(f.css)({marginLeft:"4px"});function P(e){var t=e.src,n=e.name,a=e.className,c=e.containerClassName;return r.a.createElement("div",{className:c},r.a.createElement("div",{className:a},r.a.createElement(_.a,{src:t}),r.a.createElement("span",{className:M},n)))}function V(e){var t=e.dish,n=t.name,a=t.avatar;return r.a.createElement(P,{src:a,name:n})}function H(e,t){var n=e.dish,a=e.timeIncrease,r=2*n.maxTime/1e3,c=0;return t===K.ORDER&&(c=a*r),r+c}P.defaultProps={className:L.toString(),containerClassName:G.toString()};var K={WAITING:"WAITING",ORDER:"ORDER"};function W(e,t,n,r,c){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l=(arguments.length>6&&void 0!==arguments[6]&&arguments[6],Object(a.useRef)(!1)),o=S(e,t,n,r),s=o.count,u=o.setCount;return s>=n&&!l.current&&r&&(c(),l.current=!0,i&&u(0)),Object(a.useEffect)(function(){l.current=!1},[e,n,t,r]),{time:s}}var F=Object(f.css)({display:"flex",flexDirection:"row",justifyContent:"flex-start"}),B=Object(f.css)({display:"flex",flexDirection:"column",alignItems:"center"}),U=Object(f.css)({display:"flex",flexDirection:"column",alignItems:"center",marginLeft:"12px"});function X(e){var t=e.customer,n=e.takeOrder,a=(e.canMake,e.onTimeExceeded),c=t.name,i=t.orderId,l=t.avatar,o=I(),s=x()[i],u=!function(e,t){return R(t).some(function(t){return t===e})}(s.id),m=H(s,K.WAITING),d=W(1e3,1,m,!o&&u,function(){return a(K.WAITING,m)}).time,f=H(s,K.ORDER),p=W(1e3,1,f,!o&&!u,function(){return a(K.ORDER,f)}).time;return r.a.createElement("div",{"data-testid":"customer-id-".concat(t.id)},r.a.createElement(v.a,{type:"flex",justify:"start"},r.a.createElement(E.a,{span:8},r.a.createElement(P,{src:l,name:c})),r.a.createElement(E.a,{span:8},s&&r.a.createElement(V,{dish:s.dish})),r.a.createElement(E.a,{span:8},r.a.createElement(T.a,{onClick:n,type:"primary",disabled:o||!u,"data-testid":"take-order-".concat(t.id)},"Take order"))),r.a.createElement(v.a,{type:"flex",justify:"start"},r.a.createElement(E.a,{span:24},r.a.createElement("div",{className:F},r.a.createElement("div",{className:B},r.a.createElement("div",null,"Take order ","".concat(d," / ").concat(m,"s")),r.a.createElement(w.a,{default:"default",type:"line",percent:100-d/m*100,width:35,status:u?"normal":"active",strokeColor:{"0%":"#e90e00","100%":"#00d002"},format:function(e){return""}})),!u&&r.a.createElement("div",{className:U},r.a.createElement("div",null,"Make order ","".concat(p," / ").concat(f,"s")),r.a.createElement(w.a,{default:"default",type:"line",percent:100-p/f*100,width:35,status:"active",strokeColor:{"0%":"#e90e00","100%":"#00d002"},format:function(e){return""}}))))))}var z=n(1288),J=n(38),Y=n.n(J),Z={ARRIVING:"ARRIVING",ACTIVE:"ACTIVE",DONE:"DONE",ANGRY:"ANGRY"};var q,$,Q=n(8),ee=n(31),te=n.n(ee),ne={WAITING:"WAITING",GATHER_INGREDIENTS:"GATHER_INGREDIENTS",MIX:"MIX",BAKE:"BAKE",SERVE:"SERVE"},ae=new Proxy((q={},Object(Q.a)(q,ne.GATHER_INGREDIENTS,6e3),Object(Q.a)(q,ne.MIX,12e3),Object(Q.a)(q,ne.BAKE,2e4),Object(Q.a)(q,ne.SERVE,5e3),q),{get:function(e,t,n){return e[t]/1}}),re={SALAD:{name:"Salad",avatar:"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/160/whatsapp/186/green-salad_1f957.png",phases:[ne.GATHER_INGREDIENTS,ne.MIX,ne.SERVE]},PIZZA:{name:"Pizza",avatar:"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/160/whatsapp/116/slice-of-pizza_1f355.png",phases:[ne.GATHER_INGREDIENTS,ne.MIX,ne.BAKE,ne.SERVE]}};function ce(e){if(!e){var t=te.a.random(0,Object.keys(re).length-1,!1);e=Object.keys(re)[t]}var n=re[e],a=te.a.cloneDeep(n);return a.phase=ne.WAITING,a.maxTime=function(e){var t=e.phases,n=0;return t.forEach(function(e){n+=ae[e]}),n}(a),a}function ie(e){return e.substr(0,1).toUpperCase()+e.substr(1)}function le(e){if(e instanceof String)return btoa(e);var t=JSON.stringify(e);return btoa(t)}function oe(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=atob(e);return t?JSON.parse(n):n}var se=0;function ue(){return{id:++se,name:Y.a.name.firstName(),avatar:Y.a.image.avatar(24,24,!0),orderId:null,speed:1,level:1,experience:0,nextLevel:1,skills:{},skillsToTake:0}}function me(e){var t=te.a.cloneDeep(e);Object.values(t).forEach(function(e){var t=e.skills,n={};Object.values(t).forEach(function(e){n[e.id]={id:e.id,level:e.level}}),e.skills=n});var n=le(t);localStorage.setItem("cooks",n),console.log("Saved ".concat(Object.values(e).length," cooks to localStorage"))}var de,fe,ve="SKILL_BAKER",Ee="SKILL_PLEASER",pe="SKILL_MIXER",Oe="SKILL_COOK",be="SKILL_GATHERER",je=($={},Object(Q.a)($,"SKILL_SERVER",{id:"SKILL_SERVER",name:"Master server",description:"Decreases serving time by 5% per skill level",takenDescription:function(e){return"Decreases serving time by ".concat(5*e,"%")},level:1,icon:"\ud83e\udd39\ud83c\udfff\u200d\u2642\ufe0f"}),Object(Q.a)($,ve,{id:ve,name:"Master baker",description:"Decrease baking time by 5% per skill level",takenDescription:function(e){return"Decreases baking time by ".concat(5*e,"%")},level:1,icon:"\ud83d\udd25"}),Object(Q.a)($,Ee,{id:Ee,name:"People pleaser",description:"When order phase is done, increases time the customer can wait by 2% per skill level",takenDescription:function(e){return"When order phase is done, increases time the customer can wait by ".concat(2*e,"%")},level:1,icon:"\ud83d\ude0e"}),Object(Q.a)($,pe,{id:pe,name:"Master mixer",description:"Decrease mixing time by 5% per skill level",takenDescription:function(e){return"Decreases mixing time by ".concat(5*e,"%")},level:1,icon:"\ud83d\udc69\ud83c\udffc\u200d\ud83d\udd2c"}),Object(Q.a)($,Oe,{id:Oe,name:"Master cook",description:"Decrease time of all actions by 1% per skill level",takenDescription:function(e){return"Decreases time of all actions by ".concat(1*e,"%")},level:1,icon:"\ud83d\udc69\u200d\ud83c\udf73"}),Object(Q.a)($,be,{id:be,name:"Master gatherer",description:"Decrease gathering ingredients time by 5% per skill level",takenDescription:function(e){return"Decreases gathering ingredients time by ".concat(5*e,"%")},level:1,icon:"\ud83d\udc68\u200d\ud83c\udf3e"}),$);function ge(e){var t=je[e];if(!t)throw new Error("".concat(e," skill does not exist"));return te.a.cloneDeep(t)}var Ie=0;var he=(de={},Object(Q.a)(de,ne.WAITING,"waiting"),Object(Q.a)(de,ne.GATHER_INGREDIENTS,"gathering ingredients"),Object(Q.a)(de,ne.MIX,"mixing"),Object(Q.a)(de,ne.BAKE,"baking"),Object(Q.a)(de,ne.SERVE,"serving"),de);function ye(e){return he[e]||e}var ke=(fe={},Object(Q.a)(fe,ne.WAITING,"wait"),Object(Q.a)(fe,ne.GATHER_INGREDIENTS,"gather ingredients"),Object(Q.a)(fe,ne.MIX,"mix"),Object(Q.a)(fe,ne.BAKE,"bake"),Object(Q.a)(fe,ne.SERVE,"serve"),fe);function xe(e,t,n){if(!e)return null;var a=100*te.a.get(e,"speed",0),r=ae[n];return(100-(100-a+function(e,t){var n=e.skills,a=0;if(t===ne.BAKE){var r=n[ve];r&&(a+=5*r.level)}if(t===ne.GATHER_INGREDIENTS){var c=n[be];c&&(a=5*c.level)}if(t===ne.MIX){var i=n[pe];i&&(a=5*i.level)}ne.SERVE;var l=n[Oe];l&&(a+=l.level);return a}(e,n)))/100*r}function De(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return function(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];var c={type:e};return n.forEach(function(e,t){c[e]=a[t]}),c}}function Re(e){return function(t){return{type:e,payload:t}}}var Ne=Re("GAME_STARTED"),Ce=Re("GAME_PAUSED"),Se=Re("LEVELS_LOADED"),Ae=De("GAME_STOPPED"),Te=Re("CUSTOMER_ADDED"),we="CUSTOMER_PHASE_CHANGED",_e=De(we,"customerId","phase","time"),Ge=Re("COOK_ADDED"),Le=De("COOKS_RESET"),Me=Re("ORDER_ADDED"),Pe=De("ORDER_ATTACHED_TO_CUSTOMER","orderId","customerId"),Ve="ORDER_TAKEN",He=Re(Ve),Ke=De("ORDER_DONE","orderId","customerId","cookId","result"),We=De("ORDER_NEXT_PHASE_STARTED","orderId","cookId"),Fe=De("ORDER_PHASE_FINISHED","orderId","cookId"),Be=De("COOK_GAINED_EXPERIENCE","cookId","experience"),Ue=De("COOK_LEARNED_SKILL","cookId","skillId"),Xe=De("ACTION_REGISTERED","action","timestamp"),ze=De("LEVEL_FINISHED");function Je(e){return function(t,n){e||(e=Object.keys(h(n))[0]),t(Ze()),t(Ye()),setTimeout(function(){t(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(t,n){var a=h(n),r=a[e],c=r.customers;c.forEach(function(e){var n=function(e){return{id:e.id,name:Y.a.name.firstName(),orderId:null,avatar:Y.a.image.avatar(24,24,!0),time:e.time}}(e);t(Te(n));var a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce();return{id:++Ie,dish:e,cookId:null,customerId:null,timeIncrease:0}}(ce(e.dish));t(Me(a)),t(Pe(a.id,n.id))}),t(Ne(e))}}(e))},0)}}function Ye(){return function(e,t){e(Le());var n=function(){var e=localStorage.getItem("cooks");if(!e)return[];var t=Object.values(oe(e,!0));return t.forEach(function(e){var t=e.skills,n={};Object.values(t).forEach(function(e){var t=ge(e.id);t.level=e.level,n[e.id]=t}),e.skills=n}),console.log("Loaded ".concat(t.length," cooks from localStorage")),t}();0===n.length?(e(Ge(ue())),e(Ge(ue()))):n.forEach(function(t){return e(Ge(t))})}}function Ze(){return function(e,t){e(Ae())}}function qe(e,t){return function(n,a){n(Fe(e,t));var r=x(a)[e],c=y(a)[r.customerId];if(n(Be(t,1)),0===r.dish.phases.length){n(_e(r.customerId,Z.DONE,Date.now()));var i=C(we,a).filter(function(e){return e.action.customerId===c.id}),l=C(Ve,a).filter(function(t){return t.action.payload===e}),o=i.filter(function(e){var t=e.action;return t.phase===Z.ACTIVE})[0].timestamp,s=function(e){return e[0].timestamp}(l),u=s-o,m=1e3*H(r,K.WAITING),d=1e3*H(r,K.ORDER),f=.65*m,v=.65*d,E=d-v,p=50,O=u-f;if(O>0)p=$e(p-p*(O/(m-f)));var b=50,j=function(e){var t=e.filter(function(e){var t=e.action;return t.phase===Z.DONE});if(0===t.length)throw new Error("Customer needs to have a DONE phase");return t[0].timestamp}(i)-s-v;if(j>0)b=$e(b-b*(j/E));n(Qe(e,r.customerId,t,{percent:p+b}))}}}function $e(e){return Number(e.toFixed(0))}function Qe(e,t,n,a){return function(r,c){r(Ke(e,t,n,a)),Object.values(x(c)).length===Object.values(N(c)).length&&r(ze())}}var et=Object(f.css)({display:"flex",justifyContent:"space-between",minHeight:"36px",alignItems:"center"}),tt=Object(f.css)({margin:"4px"}),nt=Object(f.css)({}),at=Object(f.css)({color:"green"}),rt=Object(f.css)({color:"red"});function ct(e){var t=e.arrivingCustomers,n=e.doneCustomers,a=e.angryCustomers,c=e.totalCustomers;return r.a.createElement("div",{className:et},r.a.createElement("div",null,r.a.createElement("span",{className:tt},"Customers"),r.a.createElement("span",{className:"".concat(tt," ").concat(nt),"data-testid":"arriving-customers"},r.a.createElement("span",{role:"img","aria-label":"not done customers"},"\ud83e\udd14 ",t)),"/",r.a.createElement("span",{className:"".concat(tt," ").concat(at),"data-testid":"done-customers"},r.a.createElement("span",{role:"img","aria-label":"done customers"},"\ud83d\ude00 ",n)),"/",r.a.createElement("span",{className:"".concat(tt," ").concat(rt),"data-testid":"angry-customers"},r.a.createElement("span",{role:"img","aria-label":"angry customers"},"\ud83e\udd2c ",a))),r.a.createElement("span",{"data-testid":"total-customers"},c))}var it=n(1),lt=n.n(it);function ot(e){return W(e.delay,100,e.time,e.start,e.onFinish,"empty timer"),null}ot.propTypes={time:lt.a.number.isRequired,delay:lt.a.number,start:lt.a.bool,onFinish:lt.a.func},ot.defaultProps={start:!1,delay:100,onFinish:function(){}};var st=n(61);function ut(e){var t=y(),n=k(Z.ACTIVE),a=k(Z.DONE),c=k(Z.ARRIVING),i=k(Z.ANGRY),l=Object(O.c)(),o=I(),s=n.map(function(e){return t[e]}),u=c.map(function(e){return t[e]}),m=Object(st.b)(u,function(e){return e.id},{from:{opacity:0},enter:{opacity:1},leave:{opacity:0},config:function(e,t){return"leave"===t?{duration:0}:{duration:e.time}}});return r.a.createElement(z.a,{title:r.a.createElement(ct,{arrivingCustomers:c.length+s.length,doneCustomers:a.length,angryCustomers:i.length,totalCustomers:Object.values(t).length}),style:{minHeight:"90vh"}},s.map(function(e){return r.a.createElement(X,{customer:e,takeOrder:function(){return l(He(e.orderId))},onTimeExceeded:function(t,n){return l(function(e,t,n){return function(a,r){var c=x(r)[e.orderId];if(c){var i=H(c,t);if(n>=i){a(_e(e.id,Z.ANGRY,Date.now()));var l=D(r)[c.cookId];t===K.ORDER&&a(Qe(c.id,e.id,l?l.id:null,{percent:0}))}}}}(e,t,n))},key:e.id})}),u.map(function(e){return r.a.createElement(ot,{key:e.id,time:e.time,start:!o,onFinish:function(){l(_e(e.id,Z.ACTIVE,Date.now()))}})}),m.map(function(e){var t=e.item,n=e.key,a=e.props;return r.a.createElement(st.a.div,{key:n,style:a},r.a.createElement(P,{src:t.avatar,name:t.name}))}))}var mt=Object(f.css)({label:"TITLE",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"}),dt=Object(f.css)({display:"flex",flexDirection:"row",flexWrap:"wrap"}),ft=Object(f.css)({display:"flex",flexDirection:"row",alignItems:"center"}),vt=Object(f.css)({minHeight:"68px",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"});function Et(e){var t,n,a=e.order,c=a.customerId,i=a.dish,l=a.id,o=(t=l,!!N(n)[t]),s=i.phase,u=te.a.get(i,"phases[0]",""),m=I(),d=Object(O.c)(),f=y(),v=D(),E=f[c],p=v[a.cookId],b=xe(p,0,s);v=u?Object.values(v):[];var j,g=W(100,100,b||0,!m&&!!!!p,function(){return d(qe(a.id,p.id))},!0).time;function h(e){return"".concat(e.name," ").concat(Number(xe(e,0,u)/1e3).toFixed(2),"s")}return r.a.createElement(z.a,{title:r.a.createElement("div",{className:mt},r.a.createElement(P,{src:i.avatar,name:"Ordered by ".concat(E.name)}),r.a.createElement("div",null,ie(ye(s)))),"data-testid":o?null:"order-id-".concat(a.id)},r.a.createElement("div",{className:vt},r.a.createElement("div",null,i.phase===ne.WAITING&&r.a.createElement("div",null,ie(ke[j=u]||j)),i.phase!==ne.WAITING&&r.a.createElement("div",{className:ft},r.a.createElement(P,{src:p.avatar,name:"".concat(p.name," is ").concat(ye(s)," ").concat(Number(g/1e3).toFixed(1)," / ").concat(b/1e3,"s")}))),r.a.createElement("div",{className:dt},v.map(function(e){return r.a.createElement("div",{key:e.id},r.a.createElement(T.a,{type:"primary",style:{margin:"4px",height:"100%"},onClick:function(){return d(We(a.id,e.id))},disabled:m||!!e.orderId||i.phase!==ne.WAITING,"data-testid":"next-phase-".concat(a.id)},r.a.createElement(P,{src:e.avatar,name:h(e)})))}))))}var pt=Object(f.css)({display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",minHeight:"36px"}),Ot=Object(f.css)({display:"flex",flexDirection:"row",flexWrap:"wrap"}),bt=Object(f.css)({marginLeft:"4px",display:"inline-flex",flexDirection:"row",alignItems:"center"});function jt(e){var t=Object.values(N()),n=x(),a=null;t.length>0&&(a=(t.map(function(e){return e.percent}).reduce(function(e,t){return e+t},0)/t.length).toFixed(1));return r.a.createElement("div",{className:pt},r.a.createElement("div",null,"Orders ",a?"[Avg: ".concat(a,"%]"):null),r.a.createElement("div",{className:Ot},t.sort(function(e,t){return t.percent-e.percent}).map(function(e){return r.a.createElement("span",{key:e.id,"data-testid":"result-".concat(e.id),className:bt},r.a.createElement(P,{src:n[e.orderId].dish.avatar,name:"".concat(e.percent,"%")}))})))}function gt(e){var t=x(),n=R().map(function(e){return t[e]}),a=Object(st.b)(n,function(e){return e.id},{from:{opacity:0},enter:{opacity:1},leave:{opacity:0}});return r.a.createElement(z.a,{title:r.a.createElement(jt,null),style:{minHeight:"90vh"}},a.map(function(e){var t=e.item,n=e.key,a=e.props;return r.a.createElement(st.a.div,{key:n,style:a},r.a.createElement(Et,{order:t}))}))}var It=n(1291),ht=n(14),yt=n(1295),kt=n(77),xt=n(1293);function Dt(e){var t=e.skill,n=Object(kt.a)(e,["skill"]),a=t.name,c=t.icon,i=t.description;return r.a.createElement(xt.a,{title:i,placement:"bottom",mouseLeaveDelay:0},r.a.createElement(T.a,Object.assign({style:{display:"flex",flexDirection:"row",alignItems:"center",margin:"4px",height:"auto"}},n),r.a.createElement("span",{role:"img",style:{fontSize:"2rem",marginRight:"4px"}},c),a))}var Rt=It.a.Panel;function Nt(e){var t=e.cook,n=e.disabled,a=void 0!==n&&n,c=t.id,i=t.skillsToTake,l=Object(O.c)();return i?r.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"}},r.a.createElement(It.a,{bordered:!1,expandIcon:function(e){var t=e.isActive;return r.a.createElement(ht.a,{type:"read",theme:t?"filled":"outlined"})}},r.a.createElement(Rt,{key:1,disabled:a,header:r.a.createElement("span",null,"Learn new skill ",r.a.createElement(yt.a,{color:"geekblue"},i))},r.a.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap"}},Object.values(je).map(function(e){return r.a.createElement(Dt,{key:e.id,skill:e,onClick:function(){return l(Ue(c,e.id))}})}))))):null}function Ct(e){var t=e.skill,n=(Object(kt.a)(e,["skill"]),t.level),a=t.icon,c=t.takenDescription;return r.a.createElement(xt.a,{title:c(n),placement:"bottom",mouseLeaveDelay:0},r.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"}},r.a.createElement(yt.a,{color:{1:"lime",2:"green",3:"cyan",4:"blue",5:"purple",6:"magenta",7:"red",8:"volcano",9:"orange",10:"gold"}[n],style:{marginTop:"8px"}},n),r.a.createElement("span",{role:"img",style:{fontSize:"2rem",marginRight:"4px"}},a)))}var St=Object(f.css)({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-start"}),At=Object(f.css)({width:"148px",display:"flex",alignItems:"center",height:"100%"}),Tt=Object(f.css)({display:"flex",flexDirection:"row",alignItems:"center"});function wt(e){var t=e.cook,n=I(),a=t.name,c=t.avatar,i=t.nextLevel,l=t.experience,o=t.skills,s=Number(Number(l/i*100).toFixed(0));return r.a.createElement("div",{className:St},r.a.createElement("div",{className:Tt},r.a.createElement(P,{src:c,name:a,containerClassName:At.toString()}),r.a.createElement("div",null,r.a.createElement("div",null,"Level ".concat(t.level,". Experience: ").concat(t.experience," / ").concat(t.nextLevel,".")),r.a.createElement("div",null,"Speed modifier: ".concat(t.speed)))),r.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.a.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap"}},Object.values(o).map(function(e){return r.a.createElement(Ct,{key:e.id,skill:e})})),r.a.createElement(Nt,{cook:t,disabled:!n})),r.a.createElement(w.a,{default:"default",type:"line",percent:s,status:"active"}))}var _t=Object(f.css)({minHeight:"36px",display:"flex",justifyContent:"space-between",alignItems:"center"});function Gt(e){var t=Object(O.c)();return r.a.createElement("div",{className:_t},r.a.createElement("div",null,"Cooks"),r.a.createElement(T.a,{onClick:function(){me({}),t(Ye())}},"Reset"))}function Lt(e){var t=D();return r.a.createElement(z.a,{title:r.a.createElement(Gt,null),style:{minHeight:"90vh"}},Object.values(t).map(function(e){return r.a.createElement(wt,{cook:e,key:e.id})}))}var Mt=Object(f.css)({display:"flex",flexDirection:"column"}),Pt=Object(f.css)({display:"flex",flexDirection:"row",width:"100%",justifyContent:"space-between"});function Vt(e){var t,n=g(),a=j(function(e){return e.levelId})(t);return n?r.a.createElement("div",{className:Mt},r.a.createElement("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"}},r.a.createElement("div",null,"Level: ".concat(a)),r.a.createElement(A,null)),r.a.createElement("div",{className:Pt},r.a.createElement("div",{style:{flex:1}},r.a.createElement(ut,null)),r.a.createElement(v.a,{style:{flex:3,display:"flex",flexDirection:"row"}},r.a.createElement(E.a,{span:16},r.a.createElement(gt,null)),r.a.createElement(E.a,{span:8},r.a.createElement(Lt,null))))):null}function Ht(){return window.location.pathname}function Kt(e){window.history.pushState(null,"Something",e)}function Wt(e){var t=g(),n=I(),c=Object(O.c)(),i=h()||{},l=Object(a.useState)(0),o=Object(p.a)(l,2),s=o[0],u=o[1];return r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("div",{style:{textAlign:"center"}},"Game options"),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},t&&r.a.createElement("div",null,r.a.createElement(T.a,{onClick:function(){return c(Ze())},type:"danger"},"Stop"),r.a.createElement(T.a,{onClick:function(){return c(Ce(!n))},type:"danger","data-testid":"pause-game"},n?"Resume":"Pause")),r.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"}},r.a.createElement("div",null,"Level select"),r.a.createElement(T.a,{onClick:function(){c(Je(s))}},"Start level"),r.a.createElement("select",{onChange:function(e){return u(Object.keys(i)[e.target.selectedIndex])}},Object.entries(i).map(function(e){var t=Object(p.a)(e,2),n=t[0];t[1];return r.a.createElement("option",{value:n,key:n},n)})),r.a.createElement(T.a,{type:"danger","data-testid":"level-editor",onClick:function(){Kt("/leveleditor")}},"Level editor"))))}function Ft(e){return g()?null:r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("div",{style:{borderBottom:"1px solid gray",margin:12}}),r.a.createElement("div",null,"Hello!"),r.a.createElement("div",null,"Welcome to my 'restaurant' simulator game."),r.a.createElement("div",null,"Customers will come to your restaurant, you will get their orders and serve them food."),r.a.createElement("div",{style:{borderBottom:"1px solid gray",margin:12}}))}n(1277);var Bt={textAlign:"center"};function Ut(e){var t=e.children;return r.a.createElement("h1",{style:Bt},t)}var Xt=n(22),zt=n(1292);function Jt(e){var t=e.id,n=e.customers,a={customers:{},isValid:!0};return t||(a.id="Level needs a name",a.isValid=!1),0===n.length&&(a.customerAmount="Needs at least 1 customer",a.isValid=!1),n.forEach(function(e){var t={name:"",dish:"",time:""};e.name||(t.name="Name cannot be empty",a.isValid=!1),e.dish||(t.dish="Dish cannot be empty",a.isValid=!1),e.time<0&&(t.time="Time cannot be negative",a.isValid=!1),a.customers[e.id]=t}),a}function Yt(e,t){if(e.id){var n=h(t);n[e.id]=e,Zt(n),console.log("Saved level ".concat(e.id," to localStorage"))}}function Zt(e){var t=le(e);localStorage.setItem("levels",t),console.log("Saved ".concat(Object.values(e).length," levels to localStorage"))}function qt(e){var t=e.id,n=e.setId,c=e.customers,i=e.levels,o=e.setCustomers,s=Object(O.c)(),u=Object(O.e)().getState,m=Object(a.useState)(""),d=Object(p.a)(m,2),f=d[0],v=d[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(zt.a,{addonBefore:"Load level",placeholder:"Paste exported level or pastebin link with exported level",onChange:function(e){return v(e.target.value)}}),r.a.createElement(T.a,{type:"danger",onClick:function(){try{n(null);var e=function(e){if(!e||"string"!==typeof e)throw Error("Invalid string ".concat(e));try{return oe(e,!0)}catch(t){console.log("".concat(e," is not in base64"))}try{e=JSON.parse(e)}catch(t){throw console.log("".concat(e," is not a parseable json")),new Error("Invalid input ".concat(e))}if(!Jt(e).isValid)throw console.log("Invalid level ".concat(e)),new Error("Invalid level ".concat(e));return e}(f),t=Object(l.a)({},i);t[e.id]=e,s(Se(t)),Yt(e,u),n(e.id),o(e.customers)}catch(a){}}},"Load"),r.a.createElement(T.a,{type:"danger",onClick:function(){var e=JSON.stringify({id:t,customers:c}),n=document.createElement("input");n.value=e,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n)}},"Export"))}var $t=n(1289),Qt=n(1294),en=$t.a.Option,tn=Object(f.css)({display:"flex",flexDirection:"row",alignItems:"center"}),nn=Object(f.css)({color:"red"}),an=Object(f.css)({margin:"4px",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"});function rn(e){var t=e.customer,n=e.onCustomerChange,a=e.errors,c=e.removeCustomer;function i(e){return e?r.a.createElement("div",{className:nn},e):null}return r.a.createElement(z.a,{key:t.id,style:{width:"30%"},title:r.a.createElement("div",{className:tn},r.a.createElement(ht.a,{type:"smile",theme:"outlined"}),r.a.createElement(zt.a,{addonBefore:"Customer name",value:t.name,allowClear:!0,onChange:function(e){n(t,"name",e.target.value)},style:{width:"200"}}),r.a.createElement(ht.a,{type:"delete",theme:"filled",onClick:function(){c(t)}}),r.a.createElement("div",null,i(a.customers[t.id].name)))},r.a.createElement("div",{className:an},r.a.createElement("div",null,r.a.createElement("div",null,"Dish"),r.a.createElement($t.a,{showSearch:!0,style:{width:200},placeholder:"Select a dish",optionFilterProp:"children",onChange:function(e){n(t,"dish",e)},filterOption:function(e,t){return t.key.toUpperCase().indexOf(e.toUpperCase())>=0},value:t.dish.toUpperCase()},Object.values(re).map(function(e){return e.name.toUpperCase()}).map(function(e){return ce(e)}).map(function(e){return r.a.createElement(en,{value:e.name.toUpperCase(),key:e.name},r.a.createElement(V,{dish:e}))})),r.a.createElement("div",null,i(a.customers[t.id].dish))),r.a.createElement("div",null,r.a.createElement("div",null,"Time ",i(a.customers[t.id].time)),r.a.createElement(Qt.a,{value:t.time,onChange:function(e){return n(t,"time",e)}}))))}var cn=Object(f.css)({display:"flex",flexDirection:"row",justifyContent:"center",maxWidth:"1000px",flexWrap:"wrap",alignSelf:"center"}),ln=Object(f.css)({margin:"4px",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"}),on=Object(f.css)({margin:"4px",display:"flex",flexDirection:"row",justifyContent:"center"}),sn=Object(f.css)({margin:"4px",display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignItems:"center"}),un=Object(f.css)({color:"red"}),mn=0;function dn(e){var t=Object(O.e)().getState,n=Object(O.c)(),c=h()||{},i=Object(a.useState)(""),o=Object(p.a)(i,2),s=o[0],u=o[1],m=Object(a.useState)([]),d=Object(p.a)(m,2),f=d[0],v=d[1],E=Object(a.useState)(!1),b=Object(p.a)(E,2),j=b[0],g=b[1];function I(e,t,n){e[t]=n,v(Object(Xt.a)(f)),g(!0)}var y=Jt({id:s,customers:f});function k(e){var t=f.findIndex(function(t){return t.id===e.id});t>-1&&(f.splice(t,1),v(Object(Xt.a)(f)))}var x,D=Object.values(re)[0].name.toUpperCase();return r.a.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"column"}},r.a.createElement("div",{className:cn},r.a.createElement(T.a,{type:"danger",onClick:function(){return Kt("/")}},"Back"),r.a.createElement(T.a,{type:"danger",onClick:function(){v([]),u("")}},"Reset level"),r.a.createElement(T.a,{type:"danger",onClick:function(){f.sort(function(e,t){return e.time-t.time}),v(Object(Xt.a)(f))}},"Sort customers by time"),r.a.createElement("select",{onChange:function(e){var t=Object.keys(c)[e.target.selectedIndex-1],n=c[t].customers.map(function(e){var t=e.name||Y.a.name.firstName();return Object(l.a)({},e,{name:t})});v(n),u(t),g(!0)},value:s},r.a.createElement("option",{value:""},"-"),Object.entries(c).map(function(e){var t=Object(p.a)(e,2),n=t[0];t[1];return r.a.createElement("option",{value:n,key:n},n)})),r.a.createElement(T.a,{type:"danger",onClick:function(){var e=Jt({id:s,customers:f});if(e.isValid){Yt({id:s,customers:f},t),g(!1);var a=Object(l.a)({},c);a[s]={id:s,customers:f},n(Se(a))}else console.log("Level invalid, cannot save",e)}},"Save ",j?"*":null),r.a.createElement(T.a,{type:"danger",onClick:function(){var e=Object(l.a)({},c);delete e[s],Zt(e),n(Se(e))}},"Delete level"),r.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},r.a.createElement(qt,{id:s,setId:u,levels:c,customers:f,setCustomers:v}))),r.a.createElement("div",{className:ln},r.a.createElement(zt.a,{placeholder:"Level name",value:s,allowClear:!0,addonBefore:"Level name",onChange:function(e){u(e.target.value)},style:{width:"25%"}}),r.a.createElement("div",null,(x=y.id)?r.a.createElement("div",{className:un},x):null)),r.a.createElement("div",{className:on},r.a.createElement(T.a,{type:"danger",onClick:function(){v([].concat(Object(Xt.a)(f),[{id:++mn,name:Y.a.name.firstName(),time:0,dish:D}]))}},"Add customer")),r.a.createElement("div",{className:sn},f.map(function(e,t){return r.a.createElement(rn,{key:e.id,customer:e,errors:y,onCustomerChange:I,removeCustomer:k})})))}var fn=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.pathname=Ht(),setInterval(function(){var t=Ht();e.pathname!==t&&(e.pathname=t,e.setState({}))},50),fetch("levels.json").then(function(e){return e.json()}).then(function(t){var n=function(){var e=localStorage.getItem("levels");return e?oe(e,!0):{}}();e.props.dispatch(Se(Object(l.a)({},t,n)))})}},{key:"render",value:function(){var e=Ht(),t=r.a.createElement(r.a.Fragment,null,r.a.createElement(Ft,null),r.a.createElement(Wt,null),r.a.createElement(Vt,null));return"/leveleditor"===e&&(t=r.a.createElement(dn,null)),r.a.createElement(r.a.Fragment,null,r.a.createElement(Ut,null,"Customers"),t)}}]),t}(a.Component),vn=Object(O.b)(function(e){return{}},null)(fn);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var En,pn=n(43),On=n(132),bn={running:!1,paused:!1,customers:{},cooks:{},orders:{},customerPhase:{},takenOrderIds:[],orderIdToResult:{},actions:[],levelId:null,levels:null},jn=0;var gn=function(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,a=arguments.length>1?arguments[1]:void 0;return t.hasOwnProperty(a.type)?t[a.type](n,a):n}}(bn,(En={},Object(Q.a)(En,"LEVELS_LOADED",function(e,t){var n=t.payload;return Object(l.a)({},e,{levels:n})}),Object(Q.a)(En,"LEVEL_FINISHED",function(e,t){return me(e.cooks),Object(l.a)({},e,{paused:!0})}),Object(Q.a)(En,"GAME_STARTED",function(e,t){var n=t.payload;return Object(l.a)({},e,{running:!0,levelId:n})}),Object(Q.a)(En,"GAME_STOPPED",function(e){var t=Object(l.a)({},e.levels);return Object(l.a)({},bn,{levels:t})}),Object(Q.a)(En,"GAME_PAUSED",function(e,t){return Object(l.a)({},e,{paused:t.payload})}),Object(Q.a)(En,"CUSTOMER_ADDED",function(e,t){var n=t.payload,a=Object(l.a)({},e.customers);a[n.id]=n;var r=Object(l.a)({},e.customerPhase);return r[n.id]=[{phase:Z.ARRIVING,time:Date.now()}],Object(l.a)({},e,{customers:a,customerPhase:r})}),Object(Q.a)(En,we,function(e,t){var n=t.customerId,a=t.phase,r=t.time,c=Object(l.a)({},e.customerPhase),i=Object(Xt.a)(c[n]);i.push({phase:a,time:r}),c[n]=i;var o=Object(l.a)({},e.orderIdToResult),s=e.customers[n].orderId;return a===Z.ANGRY&&(o[s]={percent:0,orderId:s,id:++jn}),Object(l.a)({},e,{customerPhase:c,orderIdToResult:o})}),Object(Q.a)(En,"COOK_ADDED",function(e,t){var n=t.payload,a=Object(l.a)({},e.cooks);return a[n.id]=n,Object(l.a)({},e,{cooks:a})}),Object(Q.a)(En,"COOKS_RESET",function(e,t){return Object(l.a)({},e,{cooks:{}})}),Object(Q.a)(En,"COOK_GAINED_EXPERIENCE",function(e,t){var n=t.cookId,a=t.experience,r=Object(l.a)({},e.cooks),c=Object(l.a)({},r[n]),i=c.experience,o=c.nextLevel,s=i+a;return s>=o?(c.level+=1,c.experience=0,c.speed-=.01,c.nextLevel=2*o,c.skillsToTake+=1):c.experience=s,r[n]=c,Object(l.a)({},e,{cooks:r})}),Object(Q.a)(En,"COOK_LEARNED_SKILL",function(e,t){var n=t.cookId,a=t.skillId,r=Object(l.a)({},e.cooks),c=Object(l.a)({},r[n]);c.skillsToTake-=1;var i=c.skills[a];return i?(i.level+=1,c.skills[a]=i):c.skills[a]=ge(a),r[n]=c,Object.values(e.orders).length===Object.values(e.orderIdToResult).length&&me(e.cooks),Object(l.a)({},e,{cooks:r})}),Object(Q.a)(En,"ORDER_ADDED",function(e,t){var n=t.payload,a=Object(l.a)({},e.orders);return a[n.id]=n,Object(l.a)({},e,{orders:a})}),Object(Q.a)(En,"ORDER_ATTACHED_TO_CUSTOMER",function(e,t){var n=t.customerId,a=t.orderId,r=Object(l.a)({},e.orders),c=Object(l.a)({},r[a]);c.customerId=n,r[a]=c;var i=Object(l.a)({},e.customers),o=Object(l.a)({},i[n]);return o.orderId=a,i[n]=o,Object(l.a)({},e,{orders:r,customers:i})}),Object(Q.a)(En,Ve,function(e,t){var n=t.payload,a=Object(Xt.a)(e.takenOrderIds);return a.push(n),Object(l.a)({},e,{takenOrderIds:a})}),Object(Q.a)(En,"ORDER_DONE",function(e,t){var n=t.orderId,a=t.cookId,r=t.result,c=Object(Xt.a)(e.takenOrderIds),i=c.findIndex(function(e){return e===n});i>-1&&c.splice(i,1);var o=Object(l.a)({},e.cooks),s=o[a];s&&(s.orderId=null,o[a]=s);var u=Object(l.a)({},e.orderIdToResult);return u[n]=Object(l.a)({},r,{orderId:n,id:++jn}),Object(l.a)({},e,{takenOrderIds:c,orderIdToResult:u})}),Object(Q.a)(En,"ORDER_NEXT_PHASE_STARTED",function(e,t){var n=t.orderId,a=t.cookId,r=Object(l.a)({},e.cooks),c=Object(l.a)({},r[a]);c.orderId=n,r[a]=c;var i=Object(l.a)({},e.orders),o=Object(l.a)({},i[n]),s=Object(l.a)({},o.dish);return s.phase=s.phases[0],s.phases=s.phases.slice(1),o.dish=s,o.cookId=a,i[n]=o,Object(l.a)({},e,{cooks:r,orders:i})}),Object(Q.a)(En,"ORDER_PHASE_FINISHED",function(e,t){var n=t.orderId,a=t.cookId,r=Object(l.a)({},e.cooks),c=Object(l.a)({},r[a]);c.orderId=null,r[a]=c;var i=Object(l.a)({},e.orders),o=Object(l.a)({},i[n]),s=Object(l.a)({},o.dish);s.phase=ne.WAITING,o.dish=s,o.cookId=null;var u=c.skills[Ee];if(u){var m=u.level;o.timeIncrease+=.02*m}return i[n]=o,Object(l.a)({},e,{cooks:r,orders:i})}),Object(Q.a)(En,"ACTION_REGISTERED",function(e,t){var n=t.action,a=t.timestamp,r=Object(Xt.a)(e.actions);return r.push({action:n,timestamp:a}),Object(l.a)({},e,{actions:r})}),En)),In=Object(pn.c)({game:gn}),hn=function(e){return function(t){return function(n){var a=t(n);if("ACTION_REGISTERED"!==a.type){var r=Date.now();if("GAME_STARTED"!==a.type){var c=e.getState().game.actions.filter(function(e){return"GAME_STARTED"===e.action.type});c.length>0&&(r=Date.now()-c[0].timestamp)}e.dispatch(Xe(n,r))}return a}}},yn=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||pn.d,kn=function(e){return function(e){return function(t){return Object({NODE_ENV:"production",PUBLIC_URL:"/customers"}).LOG&&"ACTION_REGISTERED"!==t.type&&console.log(t),e(t)}}},xn=Object(pn.e)(In,yn(Object(pn.a)(On.a,hn,kn)));i.a.render(r.a.createElement(O.a,{store:xn},r.a.createElement(vn,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},135:function(e,t,n){e.exports=n(1286)}},[[135,1,2]]]);
//# sourceMappingURL=main.d71c52f8.chunk.js.map